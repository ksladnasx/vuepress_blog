---
date: 2025-12-24
category:
  - 期末复习
tag:
  - 网络协议分析
sticky: true
---
# 网络协议分析作业题
## 一、数据链路层

1. CSMA/CD 和 CSMA/CA 协议的核心区别？

   答：适用场景：CSMA/CD 用于有线（以太网），CSMA/CA 用于无线（WiFi）；核心逻辑：CSMA/CD 边发边听、冲突停发，CSMA/CA 发前预约（RTS/CTS）、避免冲突；冲突处理：CSMA/CD 检测冲突后停发重传，CSMA/CA 无冲突检测。

   

2. PPP 协议流程是什么？

   答：1. 链路建立（LCP 协商参数）；2. 认证（可选，PAP/CHAP）；3. 网络层协商（NCP 分配 IP 等）；4. 数据传输；5. 链路终止（LCP 发终止帧）。

   

3. LCP、NCP、PAP、CHAP 的主要功能？

   答：LCP：建立、配置、维护和终止 PPP 链路；NCP：协商网络层参数（适配 IP 等协议）；PAP：明文传输用户名密码，两次握手认证；CHAP：哈希加密验证，三次握手，安全性高。

   

4. PAP 的流程和优缺点？

   答：流程：1. 认证方发请求；2. 被认证方明文发账号密码；3. 认证方返回结果。优点：实现简单、开销小；缺点：明文传输，安全性极低。

   

5. CHAP 的流程和优缺点？

   答：流程：1. 认证方发挑战码 + 标识；2. 被认证方哈希加密后返回结果；3. 认证方比对后返回结果。优点：加密传输、安全性高，支持周期性重认证；缺点：实现复杂、开销大。

   

6. PPPoE 协议流程是什么？

   答：1. 发现阶段：客户端发 PADI 广播→服务器回 PADO→客户端发 PADR 选择服务器→服务器发 PADS 分配会话 ID；2. 会话阶段：PPP 认证、协商，传输数据；3. 终止阶段：发 PADT 终止会话。

## 二、IP 层

### （1）IP 协议

1. IP 数据报重组在目的主机进行的优缺点？

   答：优点：简化路由器操作，提升转发效率；缺点：丢片需重传、主机缓存开销大、重组延迟高。

   

2. IP 数据报为何会多次分片？

   答：不同网络 MTU 不同，数据报从大 MTU 网络进入小 MTU 网络，长度超当前 MTU 时会被再次分片。

   

3. 收到 MF=0 的分片能说明收到所有分片吗？MF 标志的用途？

   答：不能，MF=0 仅表示当前是最后一个分片，无法确认前序分片是否到达；用途：帮助目的主机判断是否需等待后续分片，以便启动重组。

   

4. 子网编址和超网编址的主要作用？

   答：子网编址：划大网络为小子网，提高 IP 利用率，隔离广播域；超网编址：合并小网络为超网，减少路由表条目，简化路由管理。

   

5. C 类网络 202.18.6.0/24 需划分 4 个 28 台主机的网络、3 个 11 台主机的网络、4 个点到点链路，子网划分方案？

   答：4 个 28 台主机：借 2 位，子网掩码 255.255.255.192，可用主机数 62；3 个 11 台主机：借 3 位，子网掩码 255.255.255.224，可用主机数 30；4 个点到点链路：借 6 位，子网掩码 255.255.255.252，可用主机 2。

   

6. IP137.23.56.23/16 向 137.23.67.9/16 和 142.3.6.9/24 发送分组，分别是直接交付还是间接交付？

   答：向 137.23.67.9/16：直接交付（同一网络）；向 142.3.6.9/24：间接交付（不同网络）。

### （2）IPv6、ARP、ICMP

1. IPv6 为何不需要 ARP？

   答：IPv6 地址含接口标识符（基于 MAC），可直接推导网络接口；NDP 协议整合 ARP 功能。

   

2. 跨越 2 个路由器转发 IP 数据报时，ARP 的使用步骤及缓存变化？答：步骤：1. 主机 A→R1：A 发 ARP 请求 R1 的 IP，R1 回应 MAC，双方缓存对方 IP-MAC 映射；2. R1→R2：R1 发 ARP 请求 R2 的 IP，R2 回应 MAC，双方缓存映射；3. R2→主机 B：R2 发 ARP 请求 B 的 IP，B 回应 MAC，双方缓存映射。

   

3. ARP 协议的步骤？

   答：1. 源主机广播 ARP 请求（含自身 IP/MAC、目标 IP）；2. 仅目标主机处理请求；3. 目标主机单播 ARP 应答（含自身 MAC）；4. 源主机更新 ARP 缓存。

   

4. 基于 ICMP 时间戳请求 / 应答的时钟同步算法？

   答：1. 主机 A 记 T1，发请求（带 T1）；2. 主机 B 记 T2，回应（带 T1、T2）；3. 主机 A 记 T3；4. 算延迟（T3-T2）/2、时间差 Offset=T2-（T1 + 延迟）；5. A 按 Offset 调时钟（多次测量取平均）。

   

5. 测量网络 MTU 的算法及效率？

   答：算法：1. 设大初始包（如 1500 字节），置 DF 标志；2. 发探测包，收 ICMP 分片差错则包过大，收应答则合适；3. 二分法调整包大小，直到找到最大不分片包；优点：迭代次数少、效率高；缺点：动态 MTU 需重测，依赖 ICMP 不被拦截。

## 三、IP 路由协议

### （1）RIP 协议

1. 距离矢量路由算法的核心思想？

   答：以跳数为度量，路由器周期性发完整路由表，接收后更新本地路由表（距离 + 1），逐步收敛。

   

2. 链路状态路由算法的核心思想？

   答：路由器泛洪直连链路状态，收集后构建全网拓扑，用 Dijkstra 算法算最优路径，生成本地路由表。

   

3. RIP 协议的定时器及用途？

   答：更新定时器（30 秒，周期发更新）；失效定时器（180 秒，标记未更新路由失效）；抑制定时器（180 秒，抑制失效路由扩散）；刷新定时器（240 秒，删除长期失效路由）。

   

4. RIP 慢收敛的原因及解决策略？

   答：原因：路由更新逐跳传递、周期长，拓扑变化后错误路由易传播；策略：水平分割、毒性逆转、触发更新、抑制计时器。

### （2）OSPF 协议

1. 简述链路状态路由算法的核心思想。

   答：链路状态路由算法的核心是:每个路由器收集并向全网同步自身直连链路的状态(如链 路的邻居､带宽､开销等),然后基于这些信息独立计算到各目标网络的最短路径｡

   具体过程为:

   (1)各路由器生成包含自身链路信息的“链路状态通告(LSA)”;

   (2)通过泛洪机制将LSA 同步到网络中所有路由器,使每个路由器拥有全网的链路状 态数据库;

   (3)基于数据库,用Dijkstra 算法计算以自身为根的最短路径树,从而得到路由表｡

   

2. OSPF 的报文类型及主要功能？

   答：Hello 报文：发现和维护邻居关系；DBD 报文：交换链路状态数据库摘要；LSR 报文：请求缺失 LSA；LSU 报文：发送 LSA 详细内容；LSAck 报文：确认 LSU 接收。

   

3. OSPF 发现和维护邻居关系的过程？

   答：1. 路由器发 Hello 报文发现邻居；2. 双方在 Hello 报文中看到对方 ID，建立双向通信；3. 周期性发 Hello 报文，超时未收则判定邻居失效。

   

4. RIP 和 OSPF 的优缺点？

   答：RIP 优点：实现简单、资源消耗少（适用于小型网络）；缺点：跳数度量不体现链路开销，最大跳数 15，收敛慢、有环路。

   OSPF 优点：支持大型网络，基于链路开销算最优路径，收敛快、无环路，支持区域划分；缺点：实现复杂，对路由器性能要求高。

### （3）BGP 协议

1. BGP 协议的工作原理？

   答：1. 基于 TCP 端口 179 建立邻居会话；2. 交换含 AS 路径等属性的路由信息；3. 按路由属性选最优路由；4. 仅传播最优路由，拓扑变化时同步更新。

   

2. BGP 的报文类型及用途？

   答：Open 报文：建立邻居关系（带版本、AS 号等）；Update 报文：传递新增 / 撤销路由；Keepalive 报文：周期维持会话（默认 60 秒）；Notification 报文：报告错误，关闭会话。

   

3. BGP 中保持定时器和保持活跃定时器的作用及保持定时器选取？

   答：保持定时器（180 秒）：超时未收 Keepalive/Update 则断开会话；保持活跃定时器（60 秒）：周期发 Keepalive；选取：邻居协商时取双方保持时间的较小值。

   

4. BGP 报文为何无需 4 字节对齐？

   答：BGP 基于TCP 传输,而TCP 本身是字节流协议,会自动处理数据的分片与重组,无 需依赖“4 字节对齐”来保证数据的正确解析;同时BGP 报文头部已包含报文长度字段, 接收方可以通过该字段准确识别报文边界,因此无需额外填充对齐｡

## 四、传输层

1. UDP 如何标识进程？优点是什么？

   答：标识方式：IP 地址 + UDP 端口号；优点：实现简单、开销小、支持一对多 / 多对多通信。

   

2. 以太网（MTU1500 字节）上发送 8192 字节 UDP 报文，需分多少个 IP 数据报？

   答：6 个；IP 数据载荷最大 1480 字节（1500-20），UDP 数据 8184 字节（8192-8），8184÷1480≈5.53，向上取整为 6。

   

3. TCP 确认报文丢失为何不一定重传？举例说明？

   答：原因：后续捎带 / 累积确认可覆盖丢失的确认；举例：发送方发 M1（序号 100）、M2（序号 200），M1 的 ACK 丢失，接收方收 M2 后发 ACK=300（累积确认 M1、M2），发送方无需重传 M1。

   

4. TCP 糊涂窗口综合征（SWS）的原因及解决策略？

   答：原因：接收方通告小窗口，发送方发小报文，降低效率；

   策略：接收方采用“延迟确认+窗口阈值”策略，仅当接收缓存剩余空间≥最大报文段长度（MSS）或缓存空闲空间占比≥50%时，才通告窗口，发送方用 Nagle 算法合并小数据后再发送，避免连续发送小报文，或“Clark
   算法”（拒绝小窗口通告，直到窗口足够大）。