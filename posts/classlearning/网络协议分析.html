<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.20" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const useChoice = localStorage.getItem('vuepress-color-scheme')
      const systemStatus =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (useChoice === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (useChoice === 'dark' || systemStatus) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js" defer></script><title>网络协议分析总结 | xh's blog </title><meta name="description" content="A VuePress bolg Site for personal useage">
    <link rel="preload" href="/vuepress_blog/assets/style-DHqMCh0M.css" as="style"><link rel="stylesheet" href="/vuepress_blog/assets/style-DHqMCh0M.css">
    <link rel="modulepreload" href="/vuepress_blog/assets/app-UmXydJji.js"><link rel="modulepreload" href="/vuepress_blog/assets/网络协议分析.html-B0mjkNCX.js">
    <link rel="prefetch" href="/vuepress_blog/assets/get-started.html-BrW2OPcu.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/index.html-S6-rR0CJ.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/初级大模型算法工程师入门入门规划.html-PUD1hSiK.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/操作系统.html-YNNKIn6e.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/操作系统例题讲解.html-B-6_ekdl.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/操作系统课后题目.html-DlApKp0k.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/操作系统重难点.html-M5l9okRE.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/网络协议分析题.html-yvjyltqR.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/网络安全.html-fOPBAX77.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/网络安全重点.html-DGVv5IzC.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/软件定义网络.html-C67XijOI.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/软件定义网络重点.html-6Z3iflPr.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/软件定义网络题.html-BU6JilnL.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/SSEDemoFronted.html-CkMTwiLD.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/sseDomeServer.html-CMTtiZ0q.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/sseService.html-DLsLrZ5r.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/sseServiceWithBroadcastChannel.html-92dTtKay.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/docker部署流程.html-DqTH97bC.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/全栈开发.html-VUAWgHhY.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/项目经验.html-DUtouFrA.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/实习周总结1.html-DaCt6wvi.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/实习周总结2.html-BY7LBVJh.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/实习周总结3.html-C5mwoDrK.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/实习周总结4.html-CBxQOGEn.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/实习周总结5.html-DCgmTcP6.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/实习经验.html-Dkk6S6Zk.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/前端面试八股文.html-DQw4HnpF.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/基础算法.html-CLOvrdrI.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/倒货经验总结.html-CL4iQ_7G.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/todolist建立.html-B5EjdCgT.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/硅谷甄选项目笔记.html-DqHEbjP1.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/docsify项目创建与部署.html-CpLorkJ_.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/插件公式示例.html-B33CRABu.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/算法刷题.html-CXEaZEAR.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/组件传值与代码规范.html-DaePJcxq.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/nuxt.html-BVl7vC9r.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/Nuxt4.html-De03BzNK.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/react入门.html-DfLkVr-w.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/react小实践.html-DOHkAIiK.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/农担项目所遇问题及总结.html-DyTzNiLQ.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/Http.html-BpCPFPFy.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/Nginx.html-DwHWNYWU.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/element-plus.html-Dt0Shoe-.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/vitest.html-BbKkgsi4.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/Vuepress上手.html-DYIwU6Ih.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/Vue探索.html-qlFs5-z_.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/BroadcastChannel方式解决sse连接数限制.html-6GwTFg2t.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/BroadcastChannel版本sse解读.html-Adx7YZ9b.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/sseService文件解析.html-CFu3fdr4.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/SSE实践测试.html-CjSzpvRb.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/SSE简介.html-D_5DeskR.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/流的处理.html-tw-jDSu6.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/404.html-472gSdLs.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/index.html-D4Vr1x4U.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/index.html-D8BmJRWK.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/index.html-DtbrREu1.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/index.html-CgGRLfzl.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/index.html-NnkC358F.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/index.html-C3eHk0Vo.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/index.html-HpkemBGh.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/index.html-BX-QMr8T.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/index.html-C3D2GhaK.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/index.html-BPrdVcRz.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/index.html-CCEYsNkj.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/index.html-B2JiFNeM.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/index.html-Bt2CbkVn.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/index.html-DzDHRR9E.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/index.html-Clc2oEJx.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/index.html-cvbG_VKD.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/index.html-jmKdmd-f.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/index.html-Bw9losca.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/index.html-COZGe3TG.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/index.html-Bo82Xr6G.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/index.html-DUExu0Mr.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/index.html-DlomL8bU.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/index.html-DbNnBFIB.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/index.html-BYZrx3C-.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/index.html-lH_oohfr.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/index.html-CM3W7KJs.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/index.html-BTsj8QAg.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/index.html-C9z1iF9P.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/index.html-BLMxlOAl.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/index.html-BAbqhVZZ.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/index.html-B3MMSr5C.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/index.html-DI57HGoX.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/index.html-DjiCImKB.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/index.html-C3CBBVRX.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/index.html-DoDaI2dM.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/index.html-zq0tpgC6.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/index.html-B_2lmY7-.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/index.html-RbGocMDB.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/index.html-CdlxNR7n.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/index.html-D7Fl-7bv.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/index.html-CoM2O_F8.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/index.html-CU0fp3Et.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/index.html-CYcDJCeV.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/index.html-_3AD9UeM.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/SearchResult-Dq26a1PS.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/browser-B92KtQ1J.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/social-share-l0sNRNKZ.js" as="script"><link rel="prefetch" href="/vuepress_blog/assets/giscus-DrGxERkK.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/vuepress_blog/"><!----><span class="vp-site-name vp-hide-mobile" aria-hidden="true">xh&#39;s blog </span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/vuepress_blog/article/" aria-label="文章"><!--[--><!--[--><!--]--><!--]-->文章<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/vuepress_blog/category/" aria-label="分类"><!--[--><!--[--><!--]--><!--]-->分类<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/vuepress_blog/tag/" aria-label="标签"><!--[--><!--[--><!--]--><!--]-->标签<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/vuepress_blog/timeline/" aria-label="时间线"><!--[--><!--[--><!--]--><!--]-->时间线<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!--[--><button type="button" class="slimsearch-button" aria-label="搜索"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="slimsearch-placeholder">搜索</div><div class="slimsearch-key-hints"><kbd class="slimsearch-key">Ctrl</kbd><kbd class="slimsearch-key">K</kbd></div></button><!--]--></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/vuepress_blog/article/" aria-label="文章"><!--[--><!--[--><!--]--><!--]-->文章<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/vuepress_blog/category/" aria-label="分类"><!--[--><!--[--><!--]--><!--]-->分类<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/vuepress_blog/tag/" aria-label="标签"><!--[--><!--[--><!--]--><!--]-->标签<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/vuepress_blog/timeline/" aria-label="时间线"><!--[--><!--[--><!--]--><!--]-->时间线<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">网络协议分析总结 <!----></p><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div vp-content><!--[--><!--]--><div><h1 id="网络协议分析总结" tabindex="-1"><a class="header-anchor" href="#网络协议分析总结"><span>网络协议分析总结</span></a></h1><p>此 页面针对ppt做了简单的总结，具体还得看ppt</p><h1 id="数据链路层协议复习总结" tabindex="-1"><a class="header-anchor" href="#数据链路层协议复习总结"><span>数据链路层协议复习总结</span></a></h1><h2 id="一、数据链路层核心功能" tabindex="-1"><a class="header-anchor" href="#一、数据链路层核心功能"><span>一、数据链路层核心功能</span></a></h2><p>数据链路层的核心作用是实现相邻节点间的可靠数据传输，关键功能包括封装成帧、差错检测、媒体访问控制（可选）、可靠交付和流量控制，为上层协议提供稳定的链路支持。</p><h2 id="二、ppp-协议-点到点协议" tabindex="-1"><a class="header-anchor" href="#二、ppp-协议-点到点协议"><span>二、PPP 协议（点到点协议）</span></a></h2><h3 id="_1-协议概述" tabindex="-1"><a class="header-anchor" href="#_1-协议概述"><span>1. 协议概述</span></a></h3><ul><li>应用广泛，为点对点连接传输多协议数据包提供标准方法，支持 IP、IPX 等多种网络层协议。</li><li>核心组成：帧格式、LCP（链路控制协议）、NCP（网络控制协议）、PAP/CHAP 认证协议（可选）。</li><li>主要特点：简单、封装成帧、透明性、支持多协议和多类型链路，具备差错检测、连接状态检测等能力。</li></ul><h3 id="_2-工作流程-5-个阶段" tabindex="-1"><a class="header-anchor" href="#_2-工作流程-5-个阶段"><span>2. 工作流程（5 个阶段）</span></a></h3><ul><li>链路不可用阶段（Dead）：链路起始和终止状态，物理层就绪后进入下一阶段。</li><li>链路建立阶段（Establish）：通过 LCP 协商链路参数，成功则进入认证阶段，失败返回不可用阶段。</li><li>认证阶段（Authenticate）：可选流程，支持 PAP 和 CHAP 协议，认证成功进入网络层协议阶段，失败则终止链路。</li><li>网络层协议阶段（Network）：通过 NCP 协商网络层参数（如 IPCP 协商 IP 地址），成功后开始数据传输。</li><li>链路终止阶段（Terminate）：可随时终止链路，物理层仍可用，载波丢失则返回不可用阶段。</li></ul><h3 id="_3-帧格式" tabindex="-1"><a class="header-anchor" href="#_3-帧格式"><span>3. 帧格式</span></a></h3><ul><li>结构：首部（Flag、Address、Control、Protocol）+ 信息部分 + 尾部（FCS、Flag）。</li><li>关键字段： <ul><li>Flag：0x7E，帧定界标志，连续发送帧可省略结束 Flag。</li><li>Address：0xFF，点到点链路接收方唯一。</li><li>Control：0x03，表示无序号信息。</li><li>Protocol：标识封装的协议类型（如 IP 为 0x0021、LCP 为 0xC021）。</li><li>FCS：2 字节，校验帧完整性。</li></ul></li><li>字节填充：解决数据透明性问题，对 Flag、特殊控制字符等进行转义处理。</li></ul><h3 id="_4-核心子协议" tabindex="-1"><a class="header-anchor" href="#_4-核心子协议"><span>4. 核心子协议</span></a></h3><ul><li>LCP（链路控制协议）：Protocol 字段为 0xC021，负责链路的建立、配置、维护和终止，支持配置请求 / 确认 / 否认 / 拒绝、终止请求 / 应答、链路维护等报文类型。</li><li>NCP（网络控制协议）：针对不同网络层协议设计，IP 网络使用 IPCP（Protocol 字段 0x8021），协商 IP 地址、压缩协议等参数。</li><li>认证协议： <ul><li>PAP：明文传输用户名和密码，认证简单但安全性低，仅在链路建立阶段执行。</li><li>CHAP：基于挑战握手，多次认证，使用 MD5 算法加密，安全性高，应用更广泛。</li></ul></li></ul><h3 id="_5-pppoe-协议" tabindex="-1"><a class="header-anchor" href="#_5-pppoe-协议"><span>5. PPPoE 协议</span></a></h3><ul><li>流程：分为发现阶段（PADI→PADO→PADR→PADS）和会话阶段，终止通过 PADT 报文实现。</li><li>报文封装：以太网帧数据区承载，发现阶段帧类型 0x8863，会话阶段 0x8864。</li></ul><h2 id="三、以太网协议" tabindex="-1"><a class="header-anchor" href="#三、以太网协议"><span>三、以太网协议</span></a></h2><h3 id="_1-协议概述-1" tabindex="-1"><a class="header-anchor" href="#_1-协议概述-1"><span>1. 协议概述</span></a></h3><ul><li>标准：包括 DIX Ethernet V2（常用）和 IEEE 802.3，TCP/IP 体系多采用前者，部分适配器仅支持 MAC 协议。</li><li>体系结构：数据链路层分为 LLC（逻辑链路控制）和 MAC（媒体接入控制）子层，LLC 作用已弱化。</li></ul><h3 id="_2-帧格式-ethernet-v2" tabindex="-1"><a class="header-anchor" href="#_2-帧格式-ethernet-v2"><span>2. 帧格式（Ethernet V2）</span></a></h3><ul><li>结构：前同步码（7 字节）+ 帧开始定界符（1 字节）+ 首部（目的地址 6 字节、源地址 6 字节、类型 2 字节）+ 数据（46-1500 字节）+ FCS（4 字节）。</li><li>无效帧判定：长度非整数字节、FCS 校验错误、数据字段长度不在 46-1500 字节、MAC 帧长度不在 64-1518 字节。</li><li>帧间最小间隔：9.6μs，确保接收方缓存清理。</li></ul><h3 id="_3-mac-地址" tabindex="-1"><a class="header-anchor" href="#_3-mac-地址"><span>3. MAC 地址</span></a></h3><ul><li>格式：48 位，十六进制表示（如 08:00:20:0E:56:7D），前 24 位为厂商 OUI，后 24 位为设备扩展标识符。</li><li>类型：单播地址（一对一）、多播地址（一对多）、广播地址（FF:FF:FF:FF:FF:FF，一对全体）。</li><li>地址标识：最低位 I/G（0 为单播，1 为组播），次低位 G/L（0 为局部管理，1 为全局管理）。</li></ul><h3 id="_4-csma-cd-协议-载波监听多点接入-碰撞检测" tabindex="-1"><a class="header-anchor" href="#_4-csma-cd-协议-载波监听多点接入-碰撞检测"><span>4. CSMA/CD 协议（载波监听多点接入 / 碰撞检测）</span></a></h3><ul><li>核心机制： <ul><li>载波监听：发送前检测信道是否空闲。</li><li>碰撞检测：发送中监测信号电压，判断是否冲突。</li><li>碰撞处理：立即停止发送，发送干扰信号，采用截断二进制指数退避算法重传。</li></ul></li><li>争用期：51.2μs（10Mb/s 以太网可发送 512bit），最短帧长 64 字节，前 64 字节无冲突则后续无冲突。</li></ul><h2 id="四、ieee-802-11-协议-无线局域网-wlan" tabindex="-1"><a class="header-anchor" href="#四、ieee-802-11-协议-无线局域网-wlan"><span>四、IEEE 802.11 协议（无线局域网 WLAN）</span></a></h2><h3 id="_1-网络组成" tabindex="-1"><a class="header-anchor" href="#_1-网络组成"><span>1. 网络组成</span></a></h3><ul><li>分类：有固定基础设施（星形拓扑，核心为 AP 接入点）和无固定基础设施（自组网络）。</li><li>基本服务集（BSS）：最小构件，含 1 个 AP 和多个移动站，标识为 SSID（服务集标识符）和 BSSID（AP 的 MAC 地址）。</li><li>扩展服务集（ESS）：多个 BSS 通过分配系统（DS）连接，支持漫游，标识为 ESSID。</li></ul><h3 id="_2-物理层标准" tabindex="-1"><a class="header-anchor" href="#_2-物理层标准"><span>2. 物理层标准</span></a></h3><table><thead><tr><th>标准</th><th>别名</th><th>频段</th><th>最高数据率</th><th>核心技术</th><th>特点</th></tr></thead><tbody><tr><td>802.11b</td><td>Wi-Fi 1</td><td>2.4GHz</td><td>11Mbit/s</td><td>扩频</td><td>传播远、价格低、速率低</td></tr><tr><td>802.11a</td><td>Wi-Fi 2</td><td>5GHz</td><td>54Mbit/s</td><td>OFDM</td><td>速率高、支持多用户、传播近</td></tr><tr><td>802.11g</td><td>Wi-Fi 3</td><td>2.4GHz</td><td>54Mbit/s</td><td>OFDM</td><td>速率高、传播远、价格适中</td></tr><tr><td>802.11n</td><td>Wi-Fi 4</td><td>2.4/5GHz</td><td>600Mbit/s</td><td>MIMO+OFDM</td><td>多天线、高吞吐量</td></tr><tr><td>802.11ac</td><td>Wi-Fi 5</td><td>5GHz</td><td>7Gbit/s</td><td>MIMO+OFDM</td><td>企业级安全、高速率</td></tr><tr><td>802.11ax</td><td>Wi-Fi 6</td><td>2.4/5GHz</td><td>9.6Gbit/s</td><td>MIMO+OFDM</td><td>密集环境优化、高吞吐量密度</td></tr></tbody></table><h3 id="_3-mac-层协议-csma-ca" tabindex="-1"><a class="header-anchor" href="#_3-mac-层协议-csma-ca"><span>3. MAC 层协议（CSMA/CA）</span></a></h3><ul><li>核心原因：无线环境无法实现碰撞检测，存在隐蔽站问题，故采用碰撞避免机制。</li><li>帧间间隔（IFS）： <ul><li>SIFS（短帧间间隔）：最短，用于 ACK、CTS 等帧，优先发送。</li><li>DIFS（分布协调功能帧间间隔）：用于数据帧和管理帧，空闲后需等待 DIFS 才能发送。</li></ul></li><li>争用机制：信道忙时推迟接入，空闲后经 DIFS 进入争用期（CW），通过退避算法随机选择时隙发送。</li><li>信道预约（RTS/CTS）：可选，发送方发 RTS，接收方回应 CTS，预约信道，减少碰撞（尤其解决隐蔽站问题）。</li></ul><h3 id="_4-mac-帧格式" tabindex="-1"><a class="header-anchor" href="#_4-mac-帧格式"><span>4. MAC 帧格式</span></a></h3><ul><li>类型：控制帧（RTS/CTS/ACK）、数据帧、管理帧。</li><li>数据帧结构：MAC 首部（30 字节，含 4 个地址字段、序号控制、持续期等）+ 帧主体（≤2312 字节）+ FCS（4 字节）。</li><li>地址字段：地址 1 为接收地址，地址 2 为发送地址，地址 3/4 根据 “去往 AP”“来自 AP” 字段动态确定。</li></ul><h3 id="_5-未来发展趋势" tabindex="-1"><a class="header-anchor" href="#_5-未来发展趋势"><span>5. 未来发展趋势</span></a></h3><ul><li>6GHz 频段开放、Wi-Fi 6/6E/7 普及、OpenRoaming 无缝连接、AI/ML 优化网络管理、与 5G/6G 融合、Matter 标准统一物联网设备。</li></ul><h2 id="五、核心协议对比" tabindex="-1"><a class="header-anchor" href="#五、核心协议对比"><span>五、核心协议对比</span></a></h2><table><thead><tr><th>协议</th><th>适用场景</th><th>媒体访问控制</th><th>认证方式</th><th>关键特点</th></tr></thead><tbody><tr><td>PPP</td><td>点对点连接（如拨号）</td><td>无（点到点无需竞争）</td><td>PAP/CHAP</td><td>简单、多协议支持</td></tr><tr><td>以太网</td><td>有线局域网</td><td>CSMA/CD</td><td>无内置认证</td><td>共享信道、高带宽</td></tr><tr><td>802.11</td><td>无线局域网</td><td>CSMA/CA</td><td>WEP/WPA/WPA2</td><td>移动接入、抗干扰</td></tr></tbody></table><table><thead><tr><th>协议模块</th><th>关键参数</th><th>流程步骤（简化）</th><th>易错点</th></tr></thead><tbody><tr><td><strong>PPP 协议</strong></td><td>1. 帧格式：Flag=0x7E、Address=0xFF、Control=0x032. 协议字段：IP=0x0021、LCP=0xC021、IPCP=0x80213. 认证：PAP（明文）、CHAP（MD5 加密）4. 最大帧长：1500 字节（MRU 默认）</td><td>1. 链路不可用→2. 链路建立（LCP 协商）→3. 认证（可选）→4. 网络层协商（NCP）→5. 链路终止</td><td>1. 认证阶段非必需，失败则终止链路2. 字节填充仅针对 Flag、0x7D 和控制字符3. 连续发送帧可省略结束 Flag</td></tr><tr><td><strong>以太网协议</strong></td><td>1. 帧格式：数据字段 46-1500 字节，总长 64-1518 字节2. MAC 地址：48 位（前 24 位 OUI）3. CSMA/CD：争用期 51.2μs，最短帧长 64 字节4. 帧间间隔：9.6μs</td><td>1. 载波监听→2. 空闲则发送→3. 碰撞检测→4. 冲突则退避重传</td><td>1. 无效帧判定含 4 种情况（长度、FCS、数据区、总长）2. 802.3 与 Ethernet V2 的区别在类型 / 长度字段3. 广播地址为 FF:FF:FF:FF:FF:FF</td></tr><tr><td><strong>802.11 协议</strong></td><td>1. 频段：2.4GHz（802.11b/g/n）、5GHz（802.11a/n/ac/ax）2. IFS：SIFS（优先）、DIFS（数据帧）3. 认证：WEP/WPA/WPA24. 帧类型：控制帧（RTS/CTS/ACK）、数据帧、管理帧</td><td>1. 关联（被动 / 主动扫描）→2. CSMA/CA 争用信道→3. 数据传输 + ACK 确认→4. 漫游 / 分离</td><td>1. 无碰撞检测，依赖 CSMA/CA+ACK2. 隐蔽站问题通过 RTS/CTS 解决3. 数据帧含 4 个地址字段，动态映射</td></tr><tr><td><strong>PPPoE 协议</strong></td><td>1. 帧类型：发现阶段 0x8863、会话阶段 0x88642. 发现阶段报文：PADI→PADO→PADR→PADS3. 终止报文：PADT</td><td>1. 发现阶段（协商会话 ID）→2. PPP 协商（LCP/NCP/ 认证）→3. 数据传输→4. PADT 终止</td><td>1. 发现阶段为广播 / 单播混合，会话阶段为单播2. 会话阶段载荷含 PPP 帧完整内容</td></tr></tbody></table><p>注：速记表聚焦高频考点，核心参数仅保留必背项，流程步骤简化为关键节点，易错点针对常考陷阱设计，可直接用于背诵记忆。</p><h1 id="ip-层协议复习总结" tabindex="-1"><a class="header-anchor" href="#ip-层协议复习总结"><span>IP 层协议复习总结</span></a></h1><h2 id="一、ip-层核心作用" tabindex="-1"><a class="header-anchor" href="#一、ip-层核心作用"><span>一、IP 层核心作用</span></a></h2><p>工作在网络层，定义 IP 地址和 IP 分组格式及传输规则，实现异构网络互联，提供 “尽力而为” 的无连接传输服务，不保证可靠性。</p><h2 id="二、ipv4-协议-重点" tabindex="-1"><a class="header-anchor" href="#二、ipv4-协议-重点"><span>二、IPv4 协议（重点）</span></a></h2><h3 id="_1-地址管理" tabindex="-1"><a class="header-anchor" href="#_1-地址管理"><span>1. 地址管理</span></a></h3><ul><li><p><strong>地址格式</strong>：32 位二进制数，点分十进制表示（如 202.117.129.108）。</p></li><li><p>分类地址</p><ul><li>A 类（0 开头）：1.0.0.0-126.255.255.255，默认子网掩码 255.0.0.0。</li><li>B 类（10 开头）：128.0.0.0-191.255.255.255，默认子网掩码 255.255.0.0。</li><li>C 类（110 开头）：192.0.0.0-223.255.255.255，默认子网掩码 255.255.255.0。</li></ul></li><li><p>特殊地址</p><ul><li>环回地址：127.0.0.0/8（用于本机测试）。</li><li>专有地址：10.0.0.0/8、172.16.0.0/12、192.168.0.0/16（内网使用，路由器不转发）。</li><li>广播地址：主机号全 1（如 192.168.1.255）。</li></ul></li><li><p><strong>子网划分</strong>：从主机号借用比特作为子网号，通过子网掩码（32 位）与 IP 地址 “与运算” 获取网络 + 子网号。</p></li><li><p>CIDR（无分类域间路由）</p><ul><li>斜线记法（如 192.168.1.0/24），网络前缀 + 主机号。</li><li>地址块分配，大小为 2 的幂次方，支持路由聚合，减小路由表规模。</li></ul></li></ul><h3 id="_2-ip-分组" tabindex="-1"><a class="header-anchor" href="#_2-ip-分组"><span>2. IP 分组</span></a></h3><ul><li><p><strong>格式</strong>：首部（固定 20 字节 + 可变选项）+ 数据。</p></li><li><p>核心字段</p><ul><li>版本（IPv4 为 4）、总长度、TTL（跳数限制，路由器转发时减 1，为 0 则丢弃）。</li><li>协议（标识上层协议，如 TCP=6、UDP=17、ICMP=1）、校验和（仅校验首部）。</li></ul></li><li><p>分片与重组</p><ul><li>分片触发：分组长度超过 MTU（最大传输单元）。</li><li>关键字段：ID（标识同一分组的分片）、MF（1 = 非最后一片，0 = 最后一片）、DF（1 = 禁止分片）、片偏移（以 8 字节为单位，标识分片位置）。</li><li>重组：仅在目的主机进行，路由器不重组。</li></ul></li></ul><h3 id="_3-分组选项" tabindex="-1"><a class="header-anchor" href="#_3-分组选项"><span>3. 分组选项</span></a></h3><ul><li>常用选项：记录路由（ping -r）、松散 / 严格源路由（ping -j/-k）、时间戳（ping -s）。</li></ul><h2 id="三、ipv6-协议-核心考点" tabindex="-1"><a class="header-anchor" href="#三、ipv6-协议-核心考点"><span>三、IPv6 协议（核心考点）</span></a></h2><h3 id="_1-核心改进" tabindex="-1"><a class="header-anchor" href="#_1-核心改进"><span>1. 核心改进</span></a></h3><ul><li>地址空间：128 位，解决 IPv4 地址耗尽问题。</li><li>首部：固定 40 字节，取消校验和，字段简化为 8 个，支持扩展首部。</li></ul><h3 id="_2-地址表示" tabindex="-1"><a class="header-anchor" href="#_2-地址表示"><span>2. 地址表示</span></a></h3><ul><li>冒号十六进制记法（如 2001:0DB8:85A3:0000:0000:8A2E:0370:7334）。</li><li>零压缩：连续全零段用 “::” 代替（如 FF05::B3）。</li><li>内嵌 IPv4：如::192.168.1.1。</li></ul><h3 id="_3-关键特性" tabindex="-1"><a class="header-anchor" href="#_3-关键特性"><span>3. 关键特性</span></a></h3><ul><li>地址类型：单播、多播、任播（新增，交付给最近节点）。</li><li>过渡技术：双协议栈（主机同时支持 IPv4/IPv6）、隧道技术（IPv6 分组封装在 IPv4 中传输）。</li><li>特殊地址：::（未指明地址）、::1（环回地址）、FE80::/10（链路本地地址）。</li></ul><h2 id="四、arp-协议-地址解析协议" tabindex="-1"><a class="header-anchor" href="#四、arp-协议-地址解析协议"><span>四、ARP 协议（地址解析协议）</span></a></h2><h3 id="_1-作用" tabindex="-1"><a class="header-anchor" href="#_1-作用"><span>1. 作用</span></a></h3><p>将 IP 地址解析为 MAC 地址（数据链路层通信需要）。</p><h3 id="_2-工作流程" tabindex="-1"><a class="header-anchor" href="#_2-工作流程"><span>2. 工作流程</span></a></h3><ul><li>发送方广播 ARP 请求（含目标 IP），全网接收。</li><li>目标主机单播 ARP 响应（含自身 MAC），仅发送方接收。</li><li>发送方缓存 IP-MAC 映射（ARP 缓存，超时自动刷新）。</li></ul><h3 id="_3-关键命令" tabindex="-1"><a class="header-anchor" href="#_3-关键命令"><span>3. 关键命令</span></a></h3><ul><li>arp -a：查看 ARP 缓存。</li><li>arp -s IP MAC：静态绑定 IP 与 MAC（防范 ARP 欺骗）。</li><li>arp -d IP：删除缓存条目。</li></ul><h3 id="_4-安全问题" tabindex="-1"><a class="header-anchor" href="#_4-安全问题"><span>4. 安全问题</span></a></h3><ul><li>ARP 欺骗：伪造 ARP 响应篡改缓存，导致通信劫持。</li><li>防范：静态绑定、ARP 欺骗检测工具、数据加密。</li></ul><h2 id="五、icmp-协议-网际控制报文协议" tabindex="-1"><a class="header-anchor" href="#五、icmp-协议-网际控制报文协议"><span>五、ICMP 协议（网际控制报文协议）</span></a></h2><h3 id="_1-作用-1" tabindex="-1"><a class="header-anchor" href="#_1-作用-1"><span>1. 作用</span></a></h3><ul><li>差错反馈：告知源端分组传输错误（如目的不可达、超时）。</li><li>网络测试：时钟同步、往返时延测量、路径探测。</li></ul><h3 id="_2-报文类型" tabindex="-1"><a class="header-anchor" href="#_2-报文类型"><span>2. 报文类型</span></a></h3><ul><li>差错报文： <ul><li>目的不可达（代码 3 = 端口不可达、4 = 需分片但 DF=1）。</li><li>超时（TTL 减为 0、重组超时）。</li><li>重定向（告知更优路由）。</li></ul></li><li>信息报文： <ul><li>回送请求 / 响应（ping 命令核心，测试地址可达性）。</li><li>时间戳请求 / 响应（时钟同步）。</li></ul></li></ul><h3 id="_3-常用工具" tabindex="-1"><a class="header-anchor" href="#_3-常用工具"><span>3. 常用工具</span></a></h3><ul><li>ping：发送 ICMP 回送请求，测试连通性（支持记录路由、时间戳选项）。</li><li>tracert（Windows）/traceroute（Unix）： <ul><li>原理：递增 TTL 值，触发路由器返回 ICMP 超时报文，追踪路径。</li><li>判断到达目的主机：收到 ICMP 端口不可达报文或回送响应。</li></ul></li></ul><h2 id="六、核心考点对比" tabindex="-1"><a class="header-anchor" href="#六、核心考点对比"><span>六、核心考点对比</span></a></h2><table><thead><tr><th>协议</th><th>核心功能</th><th>高频考点</th></tr></thead><tbody><tr><td>IPv4</td><td>地址分配、分组传输</td><td>分类地址、CIDR、分片字段、特殊地址</td></tr><tr><td>IPv6</td><td>下一代 IP 协议</td><td>地址表示、过渡技术、特殊地址</td></tr><tr><td>ARP</td><td>IP→MAC 解析</td><td>工作流程、缓存操作、ARP 欺骗防范</td></tr><tr><td>ICMP</td><td>差错反馈、网络测试</td><td>报文类型、ping/tracert 原理</td></tr></tbody></table><h2 id="七、ip-层协议核心考点速记表" tabindex="-1"><a class="header-anchor" href="#七、ip-层协议核心考点速记表"><span>七、IP 层协议核心考点速记表</span></a></h2><table><thead><tr><th>协议模块</th><th>关键参数</th><th>流程步骤（简化）</th><th>易错点</th></tr></thead><tbody><tr><td><strong>IPv4 协议</strong></td><td>1. 地址格式：32 位，点分十进制2. 分类地址：A (0 开头，1.0.0.0-126.255.255.255)、B (10 开头，128.0.0.0-191.255.255.255)、C (110 开头，192.0.0.0-223.255.255.255)3. 子网掩码：A 类 255.0.0.0、B 类 255.255.0.0、C 类 255.255.255.04. CIDR：斜线记法（如 192.168.1.0/24），网络前缀 + 主机号5. 分片字段：ID（标识分片）、MF（1 = 未完）、DF（1 = 不分片）、片偏移（8 字节为单位）</td><td>1. 地址分配：分类→子网划分→CIDR2. 分组转发：最长前缀匹配3. 分片重组：路由器分片，目的主机重组</td><td>1. 特殊地址：127.0.0.0/8（环回）、专有地址（10.0.0.0/8 等）2. 片偏移需 ×8 计算实际位置3. CIDR 地址块大小为 2 的幂次方</td></tr><tr><td><strong>IPv6 协议</strong></td><td>1. 地址格式：128 位，冒号十六进制（零压缩、内嵌 IPv4）2. 基本首部：40 字节，字段含版本 (6)、流标号、跳数限制3. 地址类型：单播、多播、任播4. 过渡技术：双协议栈、隧道技术5. 特殊地址：::（未指明）、::1（环回）、FE80::/10（链路本地）</td><td>1. 地址表示：简化记法（零压缩 + 斜线记法）2. 数据传输：基本首部 + 扩展首部3. 过渡：双协议栈兼容 IPv4，隧道穿越 IPv4 网络</td><td>1. 零压缩仅能使用一次2. 扩展首部由目的主机处理，路由器不转发3. EUI-64 转换：48 位 MAC→64 位接口标识（插入 FFFE）</td></tr><tr><td><strong>ARP 协议</strong></td><td>1. 功能：IP 地址→MAC 地址解析2. 分组类型：请求（广播）、响应（单播）3. 缓存：动态缓存（超时更新）、静态绑定4. 命令：arp -a（查看）、arp -s（绑定）、arp -d（删除）</td><td>1. 解析请求：源主机广播 ARP 请求（含目标 IP）2. 解析响应：目标主机单播 ARP 响应（含自身 MAC）3. 缓存更新：源主机存储 IP-MAC 映射</td><td>1. ARP 欺骗：伪造响应篡改缓存2. 不同网络通信需路由器转发 ARP 请求3. 缓存超时会自动刷新，需定期绑定静态地址</td></tr><tr><td><strong>ICMP 协议</strong></td><td>1. 协议层级：网络层，封装于 IP 分组（协议字段 = 1）2. 报文类型：差错（目的不可达、超时等）、信息（回送请求 / 响应等）3. 工具：ping（回送请求）、tracert（利用 TTL + 超时）4. 差错报文：含原 IP 首部前 64 位数据</td><td>1. 差错反馈：路由器 / 主机检测错误，发送 ICMP 差错报文2. 网络测试：ping 发送 Echo Request，目标返回 Echo Reply3. 路径跟踪：tracert 递增 TTL，收集路由器超时响应</td><td>1. 目的不可达代码：3 = 端口不可达、4 = 需分片但 DF=12. tracert 依赖 ICMP 超时和端口不可达报文3. ICMP 不保证可靠传输，仅反馈状态</td></tr></tbody></table><h1 id="ip-路由协议复习总结" tabindex="-1"><a class="header-anchor" href="#ip-路由协议复习总结"><span>IP 路由协议复习总结</span></a></h1><h2 id="一、路由协议核心基础" tabindex="-1"><a class="header-anchor" href="#一、路由协议核心基础"><span>一、路由协议核心基础</span></a></h2><h3 id="_1-路由本质与路由表" tabindex="-1"><a class="header-anchor" href="#_1-路由本质与路由表"><span>1. 路由本质与路由表</span></a></h3><ul><li>路由核心：路由器通过路由表转发 IP 分组，路由表条目包含「目的网络地址、下一跳地址、转发接口、路由代价」。</li><li>路由获取方式：直连路由（自动生成）、静态路由（手动配置）、动态路由（协议自动协商）。</li></ul><h3 id="_2-路由算法分类" tabindex="-1"><a class="header-anchor" href="#_2-路由算法分类"><span>2. 路由算法分类</span></a></h3><ul><li>按自适应性：静态路由（简单、不适应拓扑变化）、动态路由（自适应、开销较大）。</li><li>按使用范围：自治系统（AS）内路由（RIP、OSPF）、AS 间路由（BGP）。</li><li>按工作原理：距离向量协议（RIP）、链路状态协议（OSPF）、路径向量协议（BGP）。</li></ul><h2 id="二、rip-协议-路由信息协议" tabindex="-1"><a class="header-anchor" href="#二、rip-协议-路由信息协议"><span>二、RIP 协议（路由信息协议）</span></a></h2><h3 id="_1-核心特性" tabindex="-1"><a class="header-anchor" href="#_1-核心特性"><span>1. 核心特性</span></a></h3><ul><li>类型：距离向量协议，基于跳数（转发次数）作为路由代价。</li><li>版本：RIPv1（无子网掩码、广播发送）、RIPv2（支持子网掩码、组播发送、支持认证）、RIPng（支持 IPv6）。</li><li>关键参数： <ul><li>最大跳数：15（跳数 16 表示不可达）。</li><li>更新周期：30 秒（加 0-5 秒随机延迟，避免拥塞）。</li><li>定时器：更新定时器（30s）、过期定时器（180s，超时标记为不可达）、刷新定时器（120s，删除无效路由）。</li></ul></li></ul><h3 id="_2-工作原理" tabindex="-1"><a class="header-anchor" href="#_2-工作原理"><span>2. 工作原理</span></a></h3><ul><li>相邻路由器周期性交换完整路由表，通过距离向量算法更新路由。</li><li>收敛：经过有限次路由交换，所有路由器获得全网最短路由。</li></ul><h3 id="_3-关键问题与改进" tabindex="-1"><a class="header-anchor" href="#_3-关键问题与改进"><span>3. 关键问题与改进</span></a></h3><ul><li>慢收敛 / 计数到无穷：网络故障时，路由信息传播慢，需等待跳数增至 16 才确认不可达。</li><li>改进措施： <ul><li>水平分割：不将从邻居学习的路由回传给该邻居。</li><li>毒性逆转：回传路由时将代价设为 16（无穷大）。</li><li>触发更新：路由变化时立即发送更新，无需等待周期。</li><li>抑制法：路由失效后，60 秒内忽略同路由的更新。</li></ul></li></ul><h3 id="_4-报文格式" tabindex="-1"><a class="header-anchor" href="#_4-报文格式"><span>4. 报文格式</span></a></h3><ul><li>传输层：UDP 端口 520。</li><li>报文类型：请求报文（请求路由表）、响应报文（发送路由表）、鉴别报文（RIPv2 认证用）。</li></ul><h2 id="三、ospf-协议-开放最短路径优先" tabindex="-1"><a class="header-anchor" href="#三、ospf-协议-开放最短路径优先"><span>三、OSPF 协议（开放最短路径优先）</span></a></h2><h3 id="_1-核心特性-1" tabindex="-1"><a class="header-anchor" href="#_1-核心特性-1"><span>1. 核心特性</span></a></h3><ul><li>类型：链路状态协议，基于 Dijkstra 算法计算最短路径。</li><li>适用场景：大型 AS 内部路由，支持负载均衡、认证、区域划分。</li><li>版本：OSPFv2（IPv4）、OSPFv3（IPv6）。</li></ul><h3 id="_2-区域划分与路由器类型" tabindex="-1"><a class="header-anchor" href="#_2-区域划分与路由器类型"><span>2. 区域划分与路由器类型</span></a></h3><ul><li>区域作用：将 AS 划分为多个区域，减少路由信息开销，仅区域内同步拓扑。</li><li>关键区域：主干区域（0.0.0.0，必选，连通所有非主干区域）、非主干区域。</li><li>路由器类型： <ul><li>内部路由器：仅属于一个区域。</li><li>区域边界路由器（ABR）：连接多个区域，需连主干区域。</li><li>主干路由器：属于主干区域。</li><li>AS 边界路由器（ASBR）：与其他 AS 交换路由。</li></ul></li></ul><h3 id="_3-工作原理" tabindex="-1"><a class="header-anchor" href="#_3-工作原理"><span>3. 工作原理</span></a></h3><ul><li>链路状态数据库：所有路由器同步区域内的链路状态（拓扑图），基于数据库计算路由。</li><li>邻居与邻接关系： <ul><li>邻居关系：通过 HELLO 报文发现（广播 / NBMA 网络选举 DR/BDR）。</li><li>邻接关系：仅 DR/BDR 与其他路由器建立，交换链路状态信息。</li></ul></li><li>洪泛机制：链路状态变化时，通过 LSA（链路状态通告）洪泛同步，确保数据库一致。</li></ul><h3 id="_4-关键报文与-lsa-类型" tabindex="-1"><a class="header-anchor" href="#_4-关键报文与-lsa-类型"><span>4. 关键报文与 LSA 类型</span></a></h3><p>​</p><ul><li>报文类型（共 5 种）： <ul><li>HELLO 报文（类型 1）：发现邻居、监测链路状态、选举 DR/BDR。</li><li>数据库描述报文（类型 2）：交换链路状态数据库摘要。</li><li>链路状态请求报文（类型 3）：请求缺失的 LSA。</li><li>链路状态更新报文（类型 4）：发送 LSA（核心报文）。</li><li>链路状态确认报文（类型 5）：确认 LSA，保证可靠洪泛。</li></ul></li><li>LSA 类型（核心 5 种）： <ul><li>类型 1（路由器 LSA）：描述路由器接口链路状态，区域内洪泛。</li><li>类型 2（网络 LSA）：DR 生成，描述网络上的路由器，区域内洪泛。</li><li>类型 3（网络摘要 LSA）：ABR 生成，描述区域间路由。</li><li>类型 4（ASBR 摘要 LSA）：ABR 生成，指向 ASBR。</li><li>类型 5（AS 外部 LSA）：ASBR 生成，描述 AS 外部路由，全网洪泛（除末端区域）。</li></ul></li></ul><h2 id="四、bgp-协议-边界网关协议" tabindex="-1"><a class="header-anchor" href="#四、bgp-协议-边界网关协议"><span>四、BGP 协议（边界网关协议）</span></a></h2><h3 id="_1-核心特性-2" tabindex="-1"><a class="header-anchor" href="#_1-核心特性-2"><span>1. 核心特性</span></a></h3><ul><li>类型：路径向量协议，AS 间路由协议（连接不同 AS）。</li><li>传输层：TCP 端口 179（可靠传输，避免报文丢失）。</li><li>对等体类型： <ul><li>IBGP：同一 AS 内的 BGP 发言人（水平分割，不转发 IBGP 学习的路由）。</li><li>EBGP：不同 AS 内的 BGP 发言人。</li></ul></li></ul><h3 id="_2-工作原理-1" tabindex="-1"><a class="header-anchor" href="#_2-工作原理-1"><span>2. 工作原理</span></a></h3><ul><li>路由更新：增量更新（仅发送变化的路由，不周期性交换完整路由表）。</li><li>状态机：Idle→Connect→Active→OpenSent→OpenConfirm→Established（建立连接后交换路由）。</li><li>关键定时器：保持活跃定时器（30s，发送 Keepalive 报文）、保持定时器（90s，超时关闭连接）。</li></ul><h3 id="_3-关键报文" tabindex="-1"><a class="header-anchor" href="#_3-关键报文"><span>3. 关键报文</span></a></h3><ul><li>打开报文（Open）：建立 TCP 连接后协商参数（BGP 标识符、保持时间）。</li><li>更新报文（Update）：传递新增路由或撤销失效路由，包含路径属性（AS_PATH、NEXT_HOP 等）。</li><li>保活报文（Keepalive）：维持连接，仅含报文首部（19 字节）。</li><li>通知报文（Notification）：协议错误时发送，随后关闭连接。</li></ul><h2 id="五、三大协议核心对比" tabindex="-1"><a class="header-anchor" href="#五、三大协议核心对比"><span>五、三大协议核心对比</span></a></h2><table><thead><tr><th>协议</th><th>类型</th><th>适用范围</th><th>路由代价</th><th>收敛速度</th><th>关键优势</th><th>缺点</th></tr></thead><tbody><tr><td>RIP</td><td>距离向量</td><td>小型 AS 内</td><td>跳数</td><td>慢</td><td>简单、开销小</td><td>最大跳数限制、慢收敛</td></tr><tr><td>OSPF</td><td>链路状态</td><td>大型 AS 内</td><td>链路带宽 / 延迟</td><td>快</td><td>无跳数限制、支持负载均衡</td><td>配置复杂、开销较大</td></tr><tr><td>BGP</td><td>路径向量</td><td>AS 间</td><td>路径属性（策略）</td><td>中</td><td>支持路由策略、可靠传输</td><td>配置复杂、依赖 TCP</td></tr></tbody></table><h2 id="六、ip-路由协议核心考点速记表" tabindex="-1"><a class="header-anchor" href="#六、ip-路由协议核心考点速记表"><span>六、IP 路由协议核心考点速记表</span></a></h2><table><thead><tr><th>协议模块</th><th>关键参数</th><th>流程步骤（简化）</th><th>易错点</th></tr></thead><tbody><tr><td><strong>RIP 协议</strong></td><td>1. 最大跳数：15（16 = 不可达）2. 更新周期：30s（加随机延迟）3. 定时器：更新 (30s)、过期 (180s)、刷新 (120s)4. 版本差异：RIPv2 支持子网掩码 + 组播</td><td>1. 邻居周期性交换路由表2. 距离向量算法更新路由3. 故障时触发更新或等待超时</td><td>1. 计数到无穷 = 慢收敛2. 水平分割 / 毒性逆转仅缓解环路，不能完全避免3. RIPv1 不支持子网划分</td></tr><tr><td><strong>OSPF 协议</strong></td><td>1. 区域：主干区域 (0.0.0.0) 必选2. 路由器类型：ABR（跨区域）、ASBR（跨 AS）3. 报文类型：HELLO (1)、数据库描述 (2)、LSA 请求 (3)、LSA 更新 (4)、LSA 确认 (5)4. LSA 核心类型：1（路由器）、2（网络）、3（区域间）、5（AS 外部）</td><td>1. HELLO 报文发现邻居，选举 DR/BDR2. 交换数据库摘要，同步 LSA3. 洪泛 LSA 更新，维护链路状态数据库4. Dijkstra 算法计算最短路径</td><td>1. 仅 DR/BDR 与其他路由器建立邻接关系2. LSA 洪泛仅在区域内（类型 1/2）或全网（类型 5）3. 末端区域不接收 AS 外部 LSA</td></tr><tr><td><strong>BGP 协议</strong></td><td>1. 传输层：TCP 端口 1792. 对等体：IBGP（同一 AS）、EBGP（不同 AS）3. 报文：Open (1)、Update (2)、Keepalive (3)、Notification (4)4. 路径属性：AS_PATH（防环路）、NEXT_HOP（下一跳）</td><td>1. 建立 TCP 连接，交换 Open 报文协商参数2. 发送 Update 报文交换路由（增量更新）3. Keepalive 报文维持连接4. 故障时发送 Notification 关闭连接</td><td>1. IBGP 不转发 IBGP 学习的路由（水平分割）2. 无跳数限制，依赖 AS_PATH 防环路3. 路由决策基于路径属性而非最短路径</td></tr><tr><td><strong>路由基础</strong></td><td>1. 路由表条目：目的网络 + 下一跳 + 接口 + 代价2. 路由算法分类：距离向量、链路状态、路径向量3. AS：自治系统，内部路由与外部路由分离</td><td>1. 路由器接收分组→提取目的 IP→查询路由表→转发 / 丢弃2. 动态路由协议自动协商路由，静态路由手动配置</td><td>1. 直连路由仅存在于直接连接的网络2. 静态路由适用于拓扑稳定的小型网络3. 动态路由收敛 = 全网路由一致的状态</td></tr></tbody></table><h1 id="传输层协议复习总结" tabindex="-1"><a class="header-anchor" href="#传输层协议复习总结"><span>传输层协议复习总结</span></a></h1><h2 id="一、传输层核心基础" tabindex="-1"><a class="header-anchor" href="#一、传输层核心基础"><span>一、传输层核心基础</span></a></h2><h3 id="_1-核心作用" tabindex="-1"><a class="header-anchor" href="#_1-核心作用"><span>1. 核心作用</span></a></h3><ul><li>实现<strong>进程间逻辑通信</strong>（网络层是主机间通信），弥补网络层不可靠传输的缺陷，为应用层提供不同质量的服务。</li><li>核心功能：多路复用（多个应用进程共享传输层协议）、多路分解（将接收的报文交付给对应应用进程）、差错控制、流量控制（TCP）、拥塞控制（TCP）。</li></ul><h3 id="_2-端口与进程寻址" tabindex="-1"><a class="header-anchor" href="#_2-端口与进程寻址"><span>2. 端口与进程寻址</span></a></h3><ul><li>端口号：16 位整数（0-65535），标识主机上的应用进程。 <ul><li>知名端口（0-1023）：绑定固定服务（如 HTTP=80、FTP=21、Telnet=23）。</li><li>动态端口（1024-65535）：应用程序动态分配。</li></ul></li><li>通信五元素：源 IP、源端口、目的 IP、目的端口、协议（TCP/UDP）。</li></ul><h3 id="_3-两大核心协议对比" tabindex="-1"><a class="header-anchor" href="#_3-两大核心协议对比"><span>3. 两大核心协议对比</span></a></h3><table><thead><tr><th>协议</th><th>服务类型</th><th>核心特点</th><th>适用场景</th></tr></thead><tbody><tr><td>UDP</td><td>不可靠、无连接、面向报文</td><td>首部开销小（8 字节）、无拥塞控制、支持多播 / 广播</td><td>音频 / 视频、DNS、TFTP、实时通信</td></tr><tr><td>TCP</td><td>可靠、面向连接、面向数据流</td><td>首部开销大（20 字节固定）、有流量 / 拥塞控制、按序交付</td><td>HTTP、FTP、SMTP、Telnet、文件传输</td></tr></tbody></table><h2 id="二、udp-协议-用户数据报协议" tabindex="-1"><a class="header-anchor" href="#二、udp-协议-用户数据报协议"><span>二、UDP 协议（用户数据报协议）</span></a></h2><h3 id="_1-核心特性-3" tabindex="-1"><a class="header-anchor" href="#_1-核心特性-3"><span>1. 核心特性</span></a></h3><ul><li>无连接：发送前无需建立连接，直接投递。</li><li>面向报文：不合并、不拆分应用层数据，保留报文边界，一次发送一个完整报文。</li><li>尽最大努力交付：不保证可靠传输，无重传、无流量控制。</li><li>支持多对多通信：一对一、一对多、多对一、多对多。</li></ul><h3 id="_2-报文格式" tabindex="-1"><a class="header-anchor" href="#_2-报文格式"><span>2. 报文格式</span></a></h3><ul><li>首部（8 字节，固定）：源端口（2 字节）、目的端口（2 字节）、长度（2 字节，含首部 + 数据）、校验和（2 字节）。</li><li>伪首部：计算校验和时临时添加（含源 IP、目的 IP、协议号 17、UDP 长度），不实际传输，仅用于校验。</li></ul><h3 id="_3-校验和计算" tabindex="-1"><a class="header-anchor" href="#_3-校验和计算"><span>3. 校验和计算</span></a></h3><ul><li>校验范围：伪首部 + UDP 首部 + 数据（数据不足偶数字节时填充 0）。</li><li>计算方式：二进制反码求和，结果再取反码；接收方校验结果为 0 则无差错。</li></ul><h3 id="_4-应用扩展" tabindex="-1"><a class="header-anchor" href="#_4-应用扩展"><span>4. 应用扩展</span></a></h3><ul><li>RTP（实时传输协议）：基于 UDP 实现，用于流媒体传输，提供时间戳、序列号等功能。</li></ul><h2 id="三、tcp-协议-传输控制协议" tabindex="-1"><a class="header-anchor" href="#三、tcp-协议-传输控制协议"><span>三、TCP 协议（传输控制协议）</span></a></h2><h3 id="_1-核心特性-4" tabindex="-1"><a class="header-anchor" href="#_1-核心特性-4"><span>1. 核心特性</span></a></h3><ul><li>面向连接：需经过 “三次握手” 建立连接，“四次挥手” 释放连接。</li><li>可靠传输：通过序号、确认、超时重传、选择性确认（SACK）保证数据不丢失、不重复、按序交付。</li><li>面向数据流：将应用层数据视为字节流，拆分 / 合并为报文段传输，无报文边界。</li><li>全双工通信：连接双方可同时发送和接收数据。</li><li>流量控制：通过滑动窗口防止接收方缓冲区溢出。</li><li>拥塞控制：通过慢启动、拥塞避免等算法避免网络过载。</li></ul><h3 id="_2-报文段格式-重点" tabindex="-1"><a class="header-anchor" href="#_2-报文段格式-重点"><span>2. 报文段格式（重点）</span></a></h3><ul><li>固定首部（20 字节）： <ul><li>源端口（2 字节）、目的端口（2 字节）：标识进程。</li><li>序号（4 字节）：本报文段数据的第一个字节的序号。</li><li>确认号（4 字节）：期望接收的下一个字节的序号（累计确认）。</li><li>数据偏移（4 位）：首部长度（单位：4 字节），最小值 5（20 字节）。</li><li>控制位（6 位）： <ul><li>URG（紧急）：1 表示含紧急数据，紧急指针有效。</li><li>ACK（确认）：1 表示确认号有效（连接建立后始终为 1）。</li><li>PSH（推送）：1 表示接收方立即交付应用进程。</li><li>RST（复位）：1 表示连接异常，需释放重建。</li><li>SYN（同步）：1 表示连接请求 / 响应，用于三次握手。</li><li>FIN（终止）：1 表示请求释放连接，用于四次挥手。</li></ul></li><li>窗口（2 字节）：接收方可用缓冲区大小，用于流量控制。</li><li>校验和（2 字节）：校验首部 + 数据（含伪首部）。</li><li>紧急指针（2 字节）：紧急数据的末尾序号（URG=1 时有效）。</li></ul></li><li>选项（可变）：常见 MSS（最大报文段长度）、SACK（选择性确认）、窗口扩大因子。</li></ul><h3 id="_3-连接管理-高频考点" tabindex="-1"><a class="header-anchor" href="#_3-连接管理-高频考点"><span>3. 连接管理（高频考点）</span></a></h3><h4 id="_1-三次握手-建立连接" tabindex="-1"><a class="header-anchor" href="#_1-三次握手-建立连接"><span>（1）三次握手（建立连接）</span></a></h4><ul><li>目的：协商初始序号（ISN）、MSS 等参数，确认双方收发能力。</li><li>流程： <ol><li>客户端（主动打开）：发送 SYN=1，seq=x → SYN_SENT 状态。</li><li>服务器（被动打开）：回复 SYN=1、ACK=1，seq=y，ack=x+1 → SYN_RCVD 状态。</li><li>客户端：回复 ACK=1，seq=x+1，ack=y+1 → ESTABLISHED 状态（服务器同步进入）。</li></ol></li></ul><h4 id="_2-四次挥手-释放连接" tabindex="-1"><a class="header-anchor" href="#_2-四次挥手-释放连接"><span>（2）四次挥手（释放连接）</span></a></h4><ul><li>目的：确保双方数据都发送完毕，释放资源。</li><li>流程： <ol><li>主动关闭方：发送 FIN=1，seq=u → FIN_WAIT_1 状态。</li><li>被动关闭方：回复 ACK=1，seq=v，ack=u+1 → CLOSE_WAIT 状态（主动方进入 FIN_WAIT_2）。</li><li>被动关闭方：数据发送完毕后，发送 FIN=1、ACK=1，seq=w，ack=u+1 → LAST_ACK 状态。</li><li>主动关闭方：回复 ACK=1，seq=u+1，ack=w+1 → TIME_WAIT 状态（等待 2MSL 后进入 CLOSED）。</li></ol></li><li>2MSL 等待原因：确保最后一个 ACK 到达对方；避免旧报文段干扰新连接。</li></ul><h3 id="_4-可靠传输机制" tabindex="-1"><a class="header-anchor" href="#_4-可靠传输机制"><span>4. 可靠传输机制</span></a></h3><ul><li>序号与确认：每个字节编序，接收方通过确认号告知已接收的最大字节序号（累计确认）。</li><li>超时重传：发送方设置重传定时器，超时未收到确认则重传（定时器时长动态调整，基于 RTT）。</li><li>选择性确认（SACK）：接收方告知已接收的非连续数据块，发送方仅重传丢失部分。</li></ul><h3 id="_5-流量控制-滑动窗口" tabindex="-1"><a class="header-anchor" href="#_5-流量控制-滑动窗口"><span>5. 流量控制（滑动窗口）</span></a></h3><ul><li>核心：接收方通过 “窗口字段” 告知发送方自己的接收能力，发送方未确认的数据量不超过接收窗口大小。</li><li>关键问题： <ul><li>0 窗口通告：接收方缓冲区满时发送，发送方需启动 “坚持定时器”，周期性发送窗口探测报文，避免死锁。</li><li>糊涂窗口综合征（SWS）：接收方频繁通告小窗口，导致发送方发送大量小报文段，浪费带宽。</li><li>解决策略：接收方推迟确认（缓冲区达一半或 MSS 时通告）；发送方采用 Nagle 算法（积累数据形成大报文段）。</li></ul></li></ul><h3 id="_6-拥塞控制-高频考点" tabindex="-1"><a class="header-anchor" href="#_6-拥塞控制-高频考点"><span>6. 拥塞控制（高频考点）</span></a></h3><ul><li>核心目标：避免网络过载，维持网络吞吐量。</li><li>关键变量： <ul><li>拥塞窗口（cwnd）：发送方估计的网络承载能力，动态调整。</li><li>慢启动门限（ssthresh）：默认 64KB，cwnd 超过后进入拥塞避免阶段。</li></ul></li><li>算法流程： <ol><li>慢启动：cwnd 从 1MSS 开始，每 RTT 翻倍（指数增长），直到 cwnd=ssthresh。</li><li>拥塞避免：cwnd 每 RTT 增加 1MSS（线性增长），避免网络拥塞。</li><li>拥塞处理： <ul><li>超时重传：ssthresh=cwnd/2，cwnd 重置为 1MSS，重新慢启动。</li><li>收到 3 个冗余 ACK：ssthresh=cwnd/2，cwnd=ssthresh，进入快速恢复（线性增长）。</li></ul></li></ol></li></ul><h3 id="_7-定时器" tabindex="-1"><a class="header-anchor" href="#_7-定时器"><span>7. 定时器</span></a></h3><ul><li>重传定时器：触发超时重传，时长基于 RTT 动态调整。</li><li>坚持定时器：处理 0 窗口通告，避免死锁。</li><li>保活定时器：服务器端检测空闲连接（默认 2 小时），发送探测报文，处理半开放连接。</li></ul><h2 id="四、核心协议对比总结" tabindex="-1"><a class="header-anchor" href="#四、核心协议对比总结"><span>四、核心协议对比总结</span></a></h2><table><thead><tr><th>对比维度</th><th>UDP</th><th>TCP</th></tr></thead><tbody><tr><td>连接性</td><td>无连接</td><td>面向连接（三次握手 / 四次挥手）</td></tr><tr><td>可靠性</td><td>不可靠（无确认 / 重传）</td><td>可靠（序号 / 确认 / 重传）</td></tr><tr><td>数据单位</td><td>数据报（保留边界）</td><td>字节流（无边界）</td></tr><tr><td>首部开销</td><td>8 字节</td><td>20 字节固定 + 可变选项</td></tr><tr><td>流量控制</td><td>无</td><td>滑动窗口</td></tr><tr><td>拥塞控制</td><td>无</td><td>慢启动 + 拥塞避免 + 快速恢复</td></tr><tr><td>适用场景</td><td>实时通信、DNS、TFTP</td><td>文件传输、HTTP、SMTP</td></tr></tbody></table><h2 id="五、传输层协议核心考点速记表" tabindex="-1"><a class="header-anchor" href="#五、传输层协议核心考点速记表"><span>五、传输层协议核心考点速记表</span></a></h2><table><thead><tr><th>协议模块</th><th>关键参数</th><th>流程步骤（简化）</th><th>易错点</th></tr></thead><tbody><tr><td><strong>UDP 协议</strong></td><td>1. 首部长度：8 字节2. 端口范围：0-65535（知名端口 0-1023）3. 校验和：含伪首部（源 IP / 目的 IP / 协议 17）4. 数据单位：数据报（不拆分 / 合并）</td><td>1. 应用层提交数据→UDP 添加首部→IP 封装2. 接收方 UDP 拆首部→原封不动交付应用层3. 校验和计算：反码求和再取反</td><td>1. 伪首部仅用于校验，不实际传输2. 无重传机制，丢包需应用层处理3. 数据报长度超过 MTU 时，IP 层分片</td></tr><tr><td><strong>TCP 协议 - 报文格式</strong></td><td>1. 固定首部：20 字节2. 控制位：SYN（连接）、FIN（释放）、ACK（确认）、RST（复位）3. 序号 / 确认号：按字节编序，累计确认4. 选项：MSS（最大报文段长度）、SACK</td><td>1. 应用层字节流→TCP 拆分报文段→添加首部2. 接收方按序号重组→交付应用层3. 控制位组合：SYN+ACK（连接响应）、FIN+ACK（释放请求）</td><td>1. ACK=1 时确认号才有效（连接建立后始终为 1）2. 数据偏移单位是 4 字节（最小值 5=20 字节）3. MSS 仅在 SYN 报文段中协商</td></tr><tr><td><strong>TCP 协议 - 连接管理</strong></td><td>1. 三次握手：协商 ISN、MSS2. 四次挥手：确保数据发送完毕3. TIME_WAIT：等待 2MSL（报文段最大生存时间）</td><td>建立：SYN→SYN+ACK→ACK释放：FIN→ACK→FIN+ACK→ACK</td><td>1. 三次握手不可省略，否则无法确认双方收发能力2. 四次挥手需两次 FIN+ACK，因全双工通信3. TIME_WAIT 状态不可跳过，避免旧报文干扰</td></tr><tr><td><strong>TCP 协议 - 可靠 / 流量 / 拥塞控制</strong></td><td>1. 可靠传输：序号、确认、超时重传、SACK2. 流量控制：滑动窗口（接收窗口通告）3. 拥塞控制：cwnd（拥塞窗口）、ssthresh（64KB）</td><td>可靠：超时重传 / 3 个冗余 ACK 触发重传流量控制：接收窗口动态调整，避免缓冲区溢出拥塞控制：慢启动（指数增长）→拥塞避免（线性增长）→拥塞处理</td><td>1. 流量控制是端到端（接收方限制），拥塞控制是全网（网络状态限制）2. 0 窗口需坚持定时器，避免死锁3. 拥塞避免阶段 cwnd 每 RTT+1MSS</td></tr></tbody></table><h1 id="应用层协议复习总结" tabindex="-1"><a class="header-anchor" href="#应用层协议复习总结"><span>应用层协议复习总结</span></a></h1><h2 id="一、应用层核心基础" tabindex="-1"><a class="header-anchor" href="#一、应用层核心基础"><span>一、应用层核心基础</span></a></h2><ul><li>核心作用：为特定应用场景提供进程间通信服务，基于传输层（TCP/UDP）实现，屏蔽网络层细节，聚焦应用需求（如域名解析、IP 分配、文件传输等）。</li><li>关键特性：每种协议针对特定场景设计，定义了报文格式、交互流程、端口号等核心要素。</li><li>常用端口：DNS (53)、DHCP (服务器 67 / 客户端 68)、FTP (控制 21 / 数据 20)、SMTP (25)、POP3 (110)、HTTP (80)、HTTPS (443)。</li></ul><h2 id="二、dns-协议-域名系统" tabindex="-1"><a class="header-anchor" href="#二、dns-协议-域名系统"><span>二、DNS 协议（域名系统）</span></a></h2><h3 id="_1-核心功能" tabindex="-1"><a class="header-anchor" href="#_1-核心功能"><span>1. 核心功能</span></a></h3><ul><li>域名与 IP 地址互转（正向解析：域名→IP；反向解析：IP→域名）。</li><li>支持主机别名（CNAME）、负载分配、邮件交换器（MX）查询。</li></ul><h3 id="_2-域名空间" tabindex="-1"><a class="header-anchor" href="#_2-域名空间"><span>2. 域名空间</span></a></h3><ul><li>层次结构：根域→顶级域（TLD，如.com/.cn/.edu）→二级域→三级域→主机名（如<a href="https://www.cqupt.edu.cn/" target="_blank" rel="noopener noreferrer">www.cqupt.edu.cn</a>）。</li><li>特殊顶级域：.arpa 用于反向解析。</li></ul><h3 id="_3-域名服务器类型" tabindex="-1"><a class="header-anchor" href="#_3-域名服务器类型"><span>3. 域名服务器类型</span></a></h3><ul><li>根域名服务器（13 套，知道所有顶级域服务器地址）。</li><li>顶级域服务器（管理二级域，如.com 服务器）。</li><li>权限域名服务器（管理特定区域的域名解析）。</li><li>本地域名服务器（默认 DNS，用户首先访问）。</li></ul><h3 id="_4-解析流程" tabindex="-1"><a class="header-anchor" href="#_4-解析流程"><span>4. 解析流程</span></a></h3><ul><li>迭代查询（常用）：本地服务器向根→顶级→权限服务器逐步查询，自己获取结果返回用户。</li><li>递归查询：本地服务器代用户查询到底，直接返回最终 IP（较少用，服务器负载大）。</li></ul><h3 id="_5-关键细节" tabindex="-1"><a class="header-anchor" href="#_5-关键细节"><span>5. 关键细节</span></a></h3><ul><li>传输层：UDP（普通解析，响应≤512 字节）或 TCP（长响应、区域传送），端口 53。</li><li>记录类型：A（IPv4 地址）、AAAA（IPv6 地址）、CNAME（别名）、MX（邮件交换器）、PTR（反向解析）。</li></ul><h2 id="三、dhcp-协议-动态主机配置协议" tabindex="-1"><a class="header-anchor" href="#三、dhcp-协议-动态主机配置协议"><span>三、DHCP 协议（动态主机配置协议）</span></a></h2><h3 id="_1-核心功能-1" tabindex="-1"><a class="header-anchor" href="#_1-核心功能-1"><span>1. 核心功能</span></a></h3><ul><li>动态分配 IP 地址及子网掩码、网关、DNS 服务器等配置，支持即插即用，避免手动配置错误。</li><li>分配方式：静态分配（绑定 MAC 与 IP）、动态分配（从地址池临时分配）。</li></ul><h3 id="_2-工作流程-地址分配四阶段" tabindex="-1"><a class="header-anchor" href="#_2-工作流程-地址分配四阶段"><span>2. 工作流程（地址分配四阶段）</span></a></h3><ol><li>发现阶段：客户端广播<code>DHCP Discover</code>，寻找 DHCP 服务器。</li><li>提供阶段：服务器响应<code>DHCP Offer</code>，提供 IP 地址和租用期。</li><li>选择阶段：客户端广播<code>DHCP Request</code>，选择一个服务器的 offer。</li><li>确认阶段：选中的服务器发送<code>DHCP ACK</code>，确认配置；若拒绝则发<code>DHCP NAK</code>。</li></ol><h3 id="_3-关键参数" tabindex="-1"><a class="header-anchor" href="#_3-关键参数"><span>3. 关键参数</span></a></h3><ul><li>租用期：IP 地址的使用有效期，客户端需在租期过半（T1）时发送<code>DHCP Request</code>续约，租期 87.5%（T2）未续约则重新申请。</li><li>端口：服务器 UDP 67，客户端 UDP 68。</li><li>报文类型：Discover（广播）、Offer（单播）、Request（广播）、ACK（单播）、NAK（广播）、Release（单播，释放 IP）。</li></ul><h2 id="四、ftp-协议-文件传输协议" tabindex="-1"><a class="header-anchor" href="#四、ftp-协议-文件传输协议"><span>四、FTP 协议（文件传输协议）</span></a></h2><h3 id="_1-核心特性-5" tabindex="-1"><a class="header-anchor" href="#_1-核心特性-5"><span>1. 核心特性</span></a></h3><ul><li>基于 TCP，可靠传输，支持文件上传（客户端→服务器）、下载（服务器→客户端）、目录浏览。</li><li>双连接机制： <ul><li>控制连接（端口 21）：全程保持打开，传输命令（如 USER/PASS/RETR/STOR）和响应（三位数字代码）。</li><li>数据连接（端口 20）：临时建立，传输文件或目录列表，传输完成后关闭。</li></ul></li></ul><h3 id="_2-关键命令与响应" tabindex="-1"><a class="header-anchor" href="#_2-关键命令与响应"><span>2. 关键命令与响应</span></a></h3><ul><li>核心命令：USER（用户名）、PASS（密码）、RETR（下载文件）、STOR（上传文件）、LIST（列目录）、QUIT（退出）。</li><li>响应代码：2xx（成功，如 220 就绪、250 操作完成）、3xx（中间响应，如 331 需密码）、4xx（临时错误）、5xx（永久错误）。</li></ul><h3 id="_3-工作模式" tabindex="-1"><a class="header-anchor" href="#_3-工作模式"><span>3. 工作模式</span></a></h3><ul><li>主动模式：服务器主动用端口 20 连接客户端的临时端口。</li><li>被动模式：服务器告知客户端临时端口，客户端主动连接（适用于客户端有防火墙的场景）。</li></ul><h2 id="五、邮件系统协议" tabindex="-1"><a class="header-anchor" href="#五、邮件系统协议"><span>五、邮件系统协议</span></a></h2><h3 id="_1-核心组件" tabindex="-1"><a class="header-anchor" href="#_1-核心组件"><span>1. 核心组件</span></a></h3><ul><li>发送协议：SMTP（简单邮件传输协议），负责邮件从客户端→发送方服务器→接收方服务器。</li><li>接收协议：POP3（邮局协议 v3），负责客户端从接收方服务器下载邮件。</li><li>扩展协议：MIME（多用途互联网邮件扩展），解决 SMTP 无法传输二进制文件（如图片 / 附件）和非 ASCII 字符（如中文）的问题。</li></ul><h3 id="_2-smtp-协议-端口-25" tabindex="-1"><a class="header-anchor" href="#_2-smtp-协议-端口-25"><span>2. SMTP 协议（端口 25）</span></a></h3><ul><li>工作流程：连接建立→邮件传送→连接终止。</li><li>核心命令：HELO（标识客户端）、MAIL FROM（发件人）、RCPT TO（收件人，多个收件人需重复执行）、DATA（传输邮件内容，以 “.” 结束）、QUIT（退出）。</li></ul><h3 id="_3-pop3-协议-端口-110" tabindex="-1"><a class="header-anchor" href="#_3-pop3-协议-端口-110"><span>3. POP3 协议（端口 110）</span></a></h3><ul><li>工作状态：认证状态（USER/PASS 登录）→处理状态（STAT/LIST/RETR/DELE 操作）→更新状态（QUIT 时删除标记为删除的邮件）。</li><li>核心命令：USER（用户名）、PASS（密码）、STAT（邮箱统计）、RETR（读取邮件）、DELE（标记删除邮件）、QUIT（退出并更新）。</li></ul><h3 id="_4-mime-协议" tabindex="-1"><a class="header-anchor" href="#_4-mime-协议"><span>4. MIME 协议</span></a></h3><ul><li>核心功能：扩展邮件内容格式，支持多媒体和非 ASCII 字符。</li><li>关键首部：Content-Type（内容类型，如 text/plain/image/jpeg）、Content-Transfer-Encoding（编码方式，如 Base64、引用可打印）。</li><li>编码方式：Base64（适用于二进制文件）、引用可打印（适用于少量非 ASCII 字符）。</li></ul><h2 id="六、http-协议-超文本传输协议" tabindex="-1"><a class="header-anchor" href="#六、http-协议-超文本传输协议"><span>六、HTTP 协议（超文本传输协议）</span></a></h2><h3 id="_1-核心功能-2" tabindex="-1"><a class="header-anchor" href="#_1-核心功能-2"><span>1. 核心功能</span></a></h3><ul><li>基于 TCP，实现万维网（WWW）的资源传输（如 HTML、图片、视频），支持客户端（浏览器）与服务器的交互。</li><li>核心特性：无状态（每次请求独立，无上下文关联）、HTTP/1.1 支持持续连接（减少 TCP 连接建立开销）。</li></ul><h3 id="_2-url-格式" tabindex="-1"><a class="header-anchor" href="#_2-url-格式"><span>2. URL 格式</span></a></h3><ul><li>标准格式：<code>协议://主机:端口/路径</code>（如http://www.cqupt.edu.cn/index.htm），HTTP 默认端口 80 可省略。</li></ul><h3 id="_3-报文格式" tabindex="-1"><a class="header-anchor" href="#_3-报文格式"><span>3. 报文格式</span></a></h3><ul><li>请求报文：请求行（方法 + URL + 版本）+ 首部行（如 User-Agent/Accept）+ 实体主体（POST 请求常用，传输表单数据）。</li><li>响应报文：状态行（版本 + 状态码 + 短语）+ 首部行（如 Content-Type/Content-Length）+ 实体主体（传输的资源内容）。</li></ul><h3 id="_4-核心方法与状态码" tabindex="-1"><a class="header-anchor" href="#_4-核心方法与状态码"><span>4. 核心方法与状态码</span></a></h3><ul><li>核心方法：GET（获取资源）、POST（提交数据）、HEAD（仅获取响应首部）、DELETE（删除资源）。</li><li>常用状态码：200 OK（成功）、404 Not Found（资源不存在）、500 Internal Server Error（服务器错误）、301 永久重定向、302 临时重定向。</li></ul><h2 id="应用层协议核心考点速记表" tabindex="-1"><a class="header-anchor" href="#应用层协议核心考点速记表"><span>应用层协议核心考点速记表</span></a></h2><table><thead><tr><th>协议模块</th><th>关键参数</th><th>流程步骤（简化）</th><th>易错点</th></tr></thead><tbody><tr><td><strong>DNS 协议</strong></td><td>1. 端口：53（UDP/TCP）2. 服务器类型：根 / 顶级 / 权限 / 本地3. 解析方式：迭代（本地服务器逐步查）、递归（本地服务器代查）4. 记录类型：A（IPv4）、AAAA（IPv6）、CNAME（别名）、MX（邮件）</td><td>1. 客户端向本地 DNS 发送查询2. 本地 DNS 迭代查询根→顶级→权限服务器3. 权限服务器返回 IP，本地 DNS 缓存并转发给客户端</td><td>1. 迭代 vs 递归：迭代是 “一步步问”，递归是 “问到底”2. UDP 用于普通解析，TCP 用于长响应 / 区域传送3. 反向解析依赖.arpa 域</td></tr><tr><td><strong>DHCP 协议</strong></td><td>1. 端口：服务器 67、客户端 68（UDP）2. 租期：默认有有效期，需 T1/T2 续约3. 报文类型：Discover/Offer/Request/ACK/NAK/Release4. 分配方式：静态（绑定 MAC）、动态（地址池）</td><td>1. 发现：客户端广播 Discover2. 提供：服务器单播 Offer3. 选择：客户端广播 Request4. 确认：服务器单播 ACK</td><td>1. 报文传输方式：Discover/Request 是广播，Offer/ACK 是单播2. 租期续约：T1（租期过半）续约，T2（87.5%）未续约则重申请3. 无 DHCP 服务器时，客户端使用 169.254.0.0/16 网段</td></tr><tr><td><strong>FTP 协议</strong></td><td>1. 双连接：控制连接 21（TCP）、数据连接 20（TCP）2. 核心命令：USER/PASS/RETR（下载）/STOR（上传）/QUIT3. 响应代码：2xx（成功）、3xx（中间）、4xx（临时错）、5xx（永久错）</td><td>1. 控制连接：客户端连服务器 21 端口，发送认证和命令2. 数据连接：传输文件 / 目录列表3. 断开：QUIT 命令关闭控制连接</td><td>1. 控制连接 vs 数据连接：控制传命令，数据传文件2. 主动模式 vs 被动模式：主动是服务器连客户端，被动是客户端连服务器3. 响应代码 220 = 就绪，250 = 操作完成，530 = 登录失败</td></tr><tr><td><strong>邮件系统协议</strong></td><td>1. 发送：SMTP（25 端口）、接收：POP3（110 端口）2. MIME：解决二进制 / 非 ASCII 传输3. SMTP 命令：HELO/MAIL FROM/RCPT TO/DATA/QUIT4. POP3 命令：USER/PASS/RETR/DELE/QUIT</td><td>发送：客户端→SMTP 服务器→接收方 SMTP 服务器接收：客户端→POP3 服务器下载邮件MIME：编码非 ASCII / 二进制内容后通过 SMTP 传输</td><td>1. SMTP 负责 “发送到服务器”，POP3 负责 “客户端下载”2. SMTP 的 DATA 命令后，邮件内容以 “.” 结束3. POP3 的 DELE 仅标记删除，QUIT 时才实际删除4. MIME 的 Base64 编码用于二进制附件</td></tr><tr><td><strong>HTTP 协议</strong></td><td>1. 端口：80（HTTP）、443（HTTPS）2. 方法：GET（获取）、POST（提交）、HEAD（仅首部）3. 状态码：200（成功）、404（未找到）、500（服务器错）4. 版本：HTTP/1.1 支持持续连接</td><td>1. 建立 TCP 连接2. 客户端发送请求报文3. 服务器返回响应报文4. 关闭连接（或持续连接复用）</td><td>1. GET vs POST：GET 参数在 URL，POST 参数在实体主体2. 无状态：需 Cookie/Session 维持上下文3. 持续连接：HTTP/1.1 默认开启，减少连接开销4. 状态码 3xx 是重定向，4xx 是客户端错，5xx 是服务器错</td></tr></tbody></table></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">最近更新：: </span><time class="meta-item-info" datetime="2026-01-04T11:13:48.000Z" data-allow-mismatch>2026/1/4 19:13</time></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: wh8261408@126.com">ksldnasx</span><!----><!--]--><!--]--></span></div></div></footer><!----><!--[--><!--]--></main><!--]--></div><!--[--><!----><!----><div class="social-share-global"><!----><button class="social-share-btn social-share-trigger" type="button" role="button" aria-label="Toggle global social share"><span class="social-share-icon-svg"><svg viewBox="0 0 1040 1024" xmlns="http://www.w3.org/2000/svg">
  <path d="M823.506 631.474c0-7.192-3.783-12.397-11.352-15.71-6.816-2.838-13.154-1.419-18.925 4.352-9.37 8.612-19.116 15.33-29.24 19.968-6.529 3.594-9.745 8.801-9.745 15.71V771.53c0 23.753-8.516 44.195-25.455 61.132-16.938 16.936-37.283 25.455-61.132 25.455H217.765c-23.753 0-44.195-8.517-61.131-25.455-16.937-16.939-25.455-37.284-25.455-61.132V321.639c0-23.753 8.516-44.195 25.455-61.132s37.283-25.455 61.131-25.455h60.565c2.175 0 5.016-.757 8.612-2.174 20.156-12.304 44.195-23.091 71.921-32.459 9.37-1.799 14.1-7.57 14.1-17.317 0-4.734-1.703-8.708-5.108-12.208-3.407-3.407-7.476-5.108-12.208-5.108h-137.88c-42.87 0-79.588 15.235-110.06 45.707S62 278.683 62 321.553V771.54c0 42.87 15.234 79.588 45.707 110.06s67.19 45.707 110.06 45.707H667.66c42.87 0 79.589-15.234 110.06-45.707 30.472-30.473 45.708-67.19 45.708-110.06l.095-140.06-.016-.006zm138.454-292.52c0-9.369-3.408-17.506-10.315-24.32L744.016 107.005c-6.815-6.815-14.953-10.315-24.32-10.315-4.353 0-8.802.945-13.535 2.745-14.1 6.15-21.106 16.75-21.106 31.891v103.812h-86.497c-38.235 0-73.625 1.986-106.273 5.962-32.648 3.976-61.42 9.465-86.215 16.468-24.887 7.004-47.315 15.805-67.282 26.214-19.967 10.41-37 21.576-51.104 33.217-14.103 11.64-26.403 25.077-37 40.03-10.598 14.953-19.117 29.62-25.456 44.097-6.34 14.387-11.352 30.285-15.142 47.604-3.783 17.317-6.341 33.5-7.571 48.64-1.229 15.143-1.893 31.514-1.893 49.212 0 20.157 3.125 42.208 9.465 65.959 6.34 23.753 13.25 44.384 20.818 61.608 7.571 17.317 16.468 35.207 26.784 53.848 10.315 18.55 17.413 30.945 21.387 37.001 3.977 6.15 7.76 11.736 11.353 16.75 3.595 4.733 8.327 7.004 14.1 7.004 1.42 0 3.595-.381 6.529-1.042 8.327-3.977 11.925-10.126 10.787-18.358-16.184-121.134-2.838-206.4 40.03-255.797 41.452-47.222 120.376-70.88 236.868-70.88h86.497v103.81c0 15.143 7.004 25.742 21.106 31.892 4.734 1.799 9.18 2.745 13.534 2.745 9.745 0 17.887-3.408 24.321-10.316L951.83 363.178c6.716-6.815 10.126-14.858 10.126-24.227l.004.004z" />
</svg></span></button></div><!--]--><!--]--></div>
    <script type="module" src="/vuepress_blog/assets/app-UmXydJji.js" defer></script>
  </body>
</html>
