import{i as X,j as Z,l as M,m as ee,n as se,p as te,q as Ee,r as R,b as C,s as t,v as le,x as O,y as ae,R as b,z as re,A as ie,B as Be,D as ne,E as oe,G as T,H as I,I as ue,J as Ae,K as ce,L as he,M as me,N as pe,O as ve,P,Q as ge,S as F}from"./app-UmXydJji.js";const de=["/get-started.html","/","/posts/ailearning/%E5%88%9D%E7%BA%A7%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%AE%97%E6%B3%95%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%85%A5%E9%97%A8%E5%85%A5%E9%97%A8%E8%A7%84%E5%88%92.html","/posts/classlearning/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F.html","/posts/classlearning/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%BE%8B%E9%A2%98%E8%AE%B2%E8%A7%A3.html","/posts/classlearning/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E8%AF%BE%E5%90%8E%E9%A2%98%E7%9B%AE.html","/posts/classlearning/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E9%87%8D%E9%9A%BE%E7%82%B9.html","/posts/classlearning/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE%E5%88%86%E6%9E%90.html","/posts/classlearning/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE%E5%88%86%E6%9E%90%E9%A2%98.html","/posts/classlearning/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8.html","/posts/classlearning/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E9%87%8D%E7%82%B9.html","/posts/classlearning/%E8%BD%AF%E4%BB%B6%E5%AE%9A%E4%B9%89%E7%BD%91%E7%BB%9C.html","/posts/classlearning/%E8%BD%AF%E4%BB%B6%E5%AE%9A%E4%B9%89%E7%BD%91%E7%BB%9C%E9%87%8D%E7%82%B9.html","/posts/classlearning/%E8%BD%AF%E4%BB%B6%E5%AE%9A%E4%B9%89%E7%BD%91%E7%BB%9C%E9%A2%98.html","/posts/codes/SSEDemoFronted.html","/posts/codes/sseDomeServer.html","/posts/codes/sseService.html","/posts/codes/sseServiceWithBroadcastChannel.html","/posts/experiences/docker%E9%83%A8%E7%BD%B2%E6%B5%81%E7%A8%8B.html","/posts/experiences/%E5%85%A8%E6%A0%88%E5%BC%80%E5%8F%91.html","/posts/experiences/%E9%A1%B9%E7%9B%AE%E7%BB%8F%E9%AA%8C.html","/posts/internship/%E5%AE%9E%E4%B9%A0%E5%91%A8%E6%80%BB%E7%BB%931.html","/posts/internship/%E5%AE%9E%E4%B9%A0%E5%91%A8%E6%80%BB%E7%BB%932.html","/posts/internship/%E5%AE%9E%E4%B9%A0%E5%91%A8%E6%80%BB%E7%BB%933.html","/posts/internship/%E5%AE%9E%E4%B9%A0%E5%91%A8%E6%80%BB%E7%BB%934.html","/posts/internship/%E5%AE%9E%E4%B9%A0%E5%91%A8%E6%80%BB%E7%BB%935.html","/posts/internship/%E5%AE%9E%E4%B9%A0%E7%BB%8F%E9%AA%8C.html","/posts/interview/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E5%85%AB%E8%82%A1%E6%96%87.html","/posts/interview/%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95.html","/posts/meaningless/%E5%80%92%E8%B4%A7%E7%BB%8F%E9%AA%8C%E6%80%BB%E7%BB%93.html","/posts/modelcode/todolist%E5%BB%BA%E7%AB%8B.html","/posts/modelcode/%E7%A1%85%E8%B0%B7%E7%94%84%E9%80%89%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0.html","/posts/otherlearning/docsify%E9%A1%B9%E7%9B%AE%E5%88%9B%E5%BB%BA%E4%B8%8E%E9%83%A8%E7%BD%B2.html","/posts/otherlearning/%E6%8F%92%E4%BB%B6%E5%85%AC%E5%BC%8F%E7%A4%BA%E4%BE%8B.html","/posts/otherlearning/%E7%AE%97%E6%B3%95%E5%88%B7%E9%A2%98.html","/posts/otherlearning/%E7%BB%84%E4%BB%B6%E4%BC%A0%E5%80%BC%E4%B8%8E%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83.html","/posts/nuxtlearning/nuxt.html","/posts/nuxtlearning/Nuxt4.html","/posts/react/react%E5%85%A5%E9%97%A8.html","/posts/react/react%E5%B0%8F%E5%AE%9E%E8%B7%B5.html","/posts/react/%E5%86%9C%E6%8B%85%E9%A1%B9%E7%9B%AE%E6%89%80%E9%81%87%E9%97%AE%E9%A2%98%E5%8F%8A%E6%80%BB%E7%BB%93.html","/posts/networklearning/Http.html","/posts/networklearning/Nginx.html","/posts/vuelearning/element-plus.html","/posts/vuelearning/vitest.html","/posts/vuelearning/Vuepress%E4%B8%8A%E6%89%8B.html","/posts/vuelearning/Vue%E6%8E%A2%E7%B4%A2.html","/posts/sse/BroadcastChannel%E6%96%B9%E5%BC%8F%E8%A7%A3%E5%86%B3sse%E8%BF%9E%E6%8E%A5%E6%95%B0%E9%99%90%E5%88%B6.html","/posts/sse/BroadcastChannel%E7%89%88%E6%9C%ACsse%E8%A7%A3%E8%AF%BB.html","/posts/sse/sseService%E6%96%87%E4%BB%B6%E8%A7%A3%E6%9E%90.html","/posts/sse/SSE%E5%AE%9E%E8%B7%B5%E6%B5%8B%E8%AF%95.html","/posts/sse/SSE%E7%AE%80%E4%BB%8B.html","/posts/sse/%E6%B5%81%E7%9A%84%E5%A4%84%E7%90%86.html","/404.html","/category/","/category/%E8%AF%B4%E6%98%8E%E6%96%87%E6%A1%A3/","/category/%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/","/category/code/","/category/%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0/","/category/%E7%BB%8F%E9%AA%8C%E6%80%BB%E7%BB%93/","/category/%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95/","/category/%E6%9D%82%E9%A1%B9/","/category/%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0/","/category/%E9%A1%B9%E7%9B%AE%E7%BB%8F%E9%AA%8C/","/category/%E4%BB%A3%E7%A0%81%E8%A7%A3%E8%AF%BB/","/tag/","/tag/ai/","/tag/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80/","/tag/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/","/tag/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE%E5%88%86%E6%9E%90/","/tag/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/","/tag/%E8%BD%AF%E4%BB%B6%E5%AE%9A%E4%B9%89%E7%BD%91%E7%BB%9C/","/tag/sse/","/tag/broadcastchannel/","/tag/react/","/tag/docker/","/tag/nginx/","/tag/vue3/","/tag/elementplus/","/tag/typescript/","/tag/mongodb/","/tag/%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82/","/tag/%E5%AE%9E%E4%B9%A0/","/tag/vitest/","/tag/javascript/","/tag/python/","/tag/cs2/","/tag/docsify/","/tag/latex/","/tag/nuxt/","/tag/ssr/","/tag/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/","/tag/nignx/","/tag/%E5%89%8D%E7%AB%AF%E9%83%A8%E7%BD%B2/","/tag/vuepress/","/tag/fetchapi/","/article/","/timeline/"],ye="SLIMSEARCH_QUERY_HISTORY",p=P(ye,[]),De=()=>{const{queryHistoryCount:l}=F;return{enabled:l>0,queryHistories:p,addQueryHistory:i=>{p.value=Array.from(new Set([i,...p.value.slice(0,l-1)]))},removeQueryHistory:i=>{p.value=[...p.value.slice(0,i),...p.value.slice(i+1)]}}},Q=l=>de[l.id]+("anchor"in l?`#${l.anchor}`:""),Ce="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:j}=F,v=P(Ce,[]),Fe=()=>({enabled:j>0,resultHistories:v,addResultHistory:r=>{{const i={link:Q(r),display:r.display};"header"in r&&(i.header=r.header),v.value=[i,...v.value.slice(0,j-1)]}},removeResultHistory:r=>{v.value=[...v.value.slice(0,r),...v.value.slice(r+1)]}}),fe=l=>{const r=ue(),i=M(),f=Ae(),B=R(0),g=C(()=>B.value>0),u=ce([]);return he(()=>{const{search:x,terminate:c}=me(),d=pe(h=>{const{resultsFilter:S=E=>E,querySplitter:m,suggestionsFilter:q,...a}=r.value;h?(B.value+=1,x(h,i.value,a).then(E=>S(E,h,i.value,f.value)).then(E=>{B.value-=1,u.value=E}).catch(E=>{console.warn(E),B.value-=1,B.value||(u.value=[])})):u.value=[]},F.searchDelay-F.suggestDelay,{maxWait:5e3});O([l,i],([h])=>{d(h.join(" "))},{immediate:!0}),ve(()=>{c()})}),{isSearching:g,results:u}};var Se=X({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(l,{emit:r}){const i=Z(),f=M(),B=ee(se),{addQueryHistory:g,queryHistories:u,removeQueryHistory:x}=De(),{resultHistories:c,addResultHistory:d,removeResultHistory:h}=Fe(),S=te(l,"queries"),{results:m,isSearching:q}=fe(S),a=Ee({isQuery:!0,index:0}),E=R(0),A=R(0),L=C(()=>u.value.length>0||c.value.length>0),H=C(()=>m.value.length>0),k=C(()=>m.value[E.value]||null),U=()=>{const{isQuery:e,index:s}=a;s===0?(a.isQuery=!e,a.index=e?c.value.length-1:u.value.length-1):a.index=s-1},N=()=>{const{isQuery:e,index:s}=a;s===(e?u.value.length-1:c.value.length-1)?(a.isQuery=!e,a.index=0):a.index=s+1},V=()=>{E.value=E.value>0?E.value-1:m.value.length-1,A.value=k.value.contents.length-1},Y=()=>{E.value=E.value<m.value.length-1?E.value+1:0,A.value=0},_=()=>{A.value<k.value.contents.length-1?A.value+=1:Y()},W=()=>{A.value>0?A.value-=1:V()},w=e=>e.map(s=>ge(s)?s:t(s[0],s[1])),z=e=>{if(e.type==="customField"){const s=ne[e.index]||"$content",[n,D=""]=oe(s)?s[f.value].split("$content"):s.split("$content");return e.display.map(o=>t("div",w([n,...o,D])))}return e.display.map(s=>t("div",w(s)))},y=()=>{E.value=0,A.value=0,r("updateQuery",""),r("close")},G=()=>t("ul",{class:"slimsearch-result-list"},t("li",{class:"slimsearch-result-list-item"},[t("div",{class:"slimsearch-result-title"},B.value.queryHistory),u.value.map((e,s)=>t("div",{class:["slimsearch-result-item",{active:a.isQuery&&a.index===s}],onClick:()=>{r("updateQuery",e)}},[t(T,{class:"slimsearch-result-type"}),t("div",{class:"slimsearch-result-content"},e),t("button",{class:"slimsearch-remove-icon",innerHTML:I,onClick:n=>{n.preventDefault(),n.stopPropagation(),x(s)}})]))])),J=()=>t("ul",{class:"slimsearch-result-list"},t("li",{class:"slimsearch-result-list-item"},[t("div",{class:"slimsearch-result-title"},B.value.resultHistory),c.value.map((e,s)=>t(b,{to:e.link,class:["slimsearch-result-item",{active:!a.isQuery&&a.index===s}],onClick:()=>{y()}},()=>[t(T,{class:"slimsearch-result-type"}),t("div",{class:"slimsearch-result-content"},[e.header?t("div",{class:"content-header"},e.header):null,t("div",e.display.map(n=>w(n)).flat())]),t("button",{class:"slimsearch-remove-icon",innerHTML:I,onClick:n=>{n.preventDefault(),n.stopPropagation(),h(s)}})]))]));return le("keydown",e=>{if(l.isFocusing){if(H.value){if(e.key==="ArrowUp")W();else if(e.key==="ArrowDown")_();else if(e.key==="Enter"){const s=k.value.contents[A.value];g(l.queries.join(" ")),d(s),i.push(Q(s)),y()}}else if(e.key==="ArrowUp")U();else if(e.key==="ArrowDown")N();else if(e.key==="Enter"){const{index:s}=a;a.isQuery?(r("updateQuery",u.value[s]),e.preventDefault()):(i.push(c.value[s].link),y())}}}),O([E,A],()=>{var e;(e=document.querySelector(".slimsearch-result-list-item.active .slimsearch-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>t("div",{class:["slimsearch-result-wrapper",{empty:l.queries.length?!H.value:!L.value}],id:"slimsearch-results"},l.queries.length?q.value?t(ae,{hint:B.value.searching}):H.value?t("ul",{class:"slimsearch-result-list"},m.value.map(({title:e,contents:s},n)=>{const D=E.value===n;return t("li",{class:["slimsearch-result-list-item",{active:D}]},[t("div",{class:"slimsearch-result-title"},e||B.value.defaultTitle),s.map((o,K)=>{const $=D&&A.value===K;return t(b,{to:Q(o),class:["slimsearch-result-item",{active:$,"aria-selected":$}],onClick:()=>{g(l.queries.join(" ")),d(o),y()}},()=>[o.type==="text"?null:t(o.type==="title"?re:o.type==="heading"?ie:Be,{class:"slimsearch-result-type"}),t("div",{class:"slimsearch-result-content"},[o.type==="text"&&o.header?t("div",{class:"content-header"},o.header):null,t("div",z(o))])])})])})):B.value.emptyResult:L.value?[G(),J()]:B.value.emptyHistory)}});export{Se as default};
